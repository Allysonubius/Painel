{"remainingRequest":"C:\\Users\\allys\\Documents\\GIT\\COVID-19-Timeline-Data-Visualizer\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\allys\\Documents\\GIT\\COVID-19-Timeline-Data-Visualizer\\src\\components\\MapSection.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\allys\\Documents\\GIT\\COVID-19-Timeline-Data-Visualizer\\src\\components\\MapSection.vue","mtime":1590605624625},{"path":"C:\\Users\\allys\\Documents\\GIT\\COVID-19-Timeline-Data-Visualizer\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\allys\\Documents\\GIT\\COVID-19-Timeline-Data-Visualizer\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\allys\\Documents\\GIT\\COVID-19-Timeline-Data-Visualizer\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\allys\\Documents\\GIT\\COVID-19-Timeline-Data-Visualizer\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBNYXAgZnJvbSAiLi9NYXAudnVlIjsKaW1wb3J0IERhdGFTd2l0Y2ggZnJvbSAnLi9EYXRhU3dpdGNoJzsKaW1wb3J0IENvdW50cnlTd2l0Y2ggZnJvbSAnLi9Db3VudHJ5U3dpdGNoJzsKaW1wb3J0IHsKICAgIGNvbWJpbmVVS0hpZ2hDaGFydHMsCiAgICBjb21iaW5lVVNIaWdoQ2hhcnRzLAogICAgY29tYmluZVdvcmxkSGlnaENoYXJ0cywKICAgIGdldFNtYWxsZXJEYXRlCn0gZnJvbSAiLi4vanMvbG9jYXRpb25VdGlscyIKaW1wb3J0IFNsaWRlQ29udHJvbGxlciBmcm9tICcuL1NsaWRlQ29udHJvbGxlcicKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogIk1hcFNlY3Rpb24iLAogICAgY29tcG9uZW50czp7CiAgICAgICAgU2xpZGVDb250cm9sbGVyLAogICAgICAgIE1hcCwKICAgICAgICBEYXRhU3dpdGNoLAogICAgICAgIENvdW50cnlTd2l0Y2gKICAgIH0sCiAgICBwcm9wczogewogICAgICAgIHRhYmxlRGF0YTogT2JqZWN0LAogICAgICAgIGNvdW50cnlOYW1lOiBTdHJpbmcsCiAgICAgICAgbWFpbkRhdGU6IFN0cmluZwogICAgfSwKICAgIGRhdGE6IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBjdXJyZW50RGF0YTogbnVsbCwKICAgICAgICAgICAgdGFiOiAxLAogICAgICAgICAgICBsb2NhdGlvbnNEYXRhOiBudWxsLAogICAgICAgICAgICBpc1VrOiB0cnVlLAogICAgICAgICAgICBpc1VzOiBmYWxzZSwKICAgICAgICAgICAgaXNEYXRhQXZhaWxhYmxlOiB0cnVlLAogICAgICAgICAgICBkYXRlOiBudWxsLAogICAgICAgICAgICByZW5kZXJDb21wb25lbnQ6IHRydWUsCiAgICAgICAgICAgIGRhdGFUeXBlOiAiY29uZmlybWVkIgogICAgICAgIH0KICAgIH0sCiAgICBtb3VudGVkKCkgewogICAgICAgIHRoaXMuaXNVayA9IHRoaXMuY291bnRyeU5hbWU9PT0iVUsiOwogICAgICAgIHRoaXMuaXNVcyA9IHRoaXMuY291bnRyeU5hbWU9PT0iVVMiOwogICAgICAgIHRoaXMuY2hhbmdlVGFiKHRoaXMuaXNVayB8fCB0aGlzLmlzVXMgPyAxIDogMCk7CiAgICB9LAogICAgd2F0Y2g6IHsKICAgICAgICBtYWluRGF0ZTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZih0aGlzLm1haW5EYXRlKSB7CiAgICAgICAgICAgICAgICBsZXQgZGF0ZVRvQ2hhbmdlID0gZ2V0U21hbGxlckRhdGUodGhpcy5tYWluRGF0ZSwgdGhpcy5jdXJyZW50RGF0YVt0aGlzLmN1cnJlbnREYXRhLmxlbmd0aC0xXS5kYXRlKTsKICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlRGF0ZShkYXRlVG9DaGFuZ2UpCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIGNoYW5nZURhdGU6IGZ1bmN0aW9uKGRhdGUpewogICAgICAgICAgICB0aGlzLmRhdGUgPSBkYXRlOwogICAgICAgICAgICB0aGlzLmxvYWRNYXAoKQogICAgICAgIH0sCiAgICAgICAgY2hhbmdlVGFiKHRhYil7CiAgICAgICAgICAgIHRoaXMudGFiID0gdGFiOwogICAgICAgICAgICBpZigodGhpcy5pc1VrIHx8IHRoaXMuaXNVcykgJiYgdGhpcy50YWIgPT09IDEpewogICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50RGF0YSA9IHRoaXMudGFibGVEYXRhLmNvdW50cnk7CiAgICAgICAgICAgIH1lbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudERhdGEgPSB0aGlzLnRhYmxlRGF0YS5nbG9iYWw7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5kYXRlID0gdGhpcy5jdXJyZW50RGF0YVt0aGlzLmN1cnJlbnREYXRhLmxlbmd0aC0xXS5kYXRlOwogICAgICAgICAgICB0aGlzLmxvYWRNYXAodHJ1ZSkKICAgICAgICB9LAogICAgICAgIGNoYW5nZURhdGFUeXBlKHR5cGUpewogICAgICAgICAgICB0aGlzLmRhdGFUeXBlID0gdHlwZTsKICAgICAgICAgICAgdGhpcy5sb2FkTWFwKCkKICAgICAgICB9LAogICAgICAgIGFzeW5jIGxvYWRNYXAocmVyZW5kZXIpewogICAgICAgICAgICAgbGV0IGlkeCA9IHRoaXMuY3VycmVudERhdGEuZmluZEluZGV4KGVsZT0+ZWxlLmRhdGUgPT09IHRoaXMuZGF0ZSk7CiAgICAgICAgICAgIHRoaXMuaXNEYXRhQXZhaWxhYmxlID0gdHJ1ZTsKICAgICAgICAgICAgIGlmKHRoaXMudGFiID09PSAxKSB7CiAgICAgICAgICAgICAgICAgaWYodGhpcy5pc1VrKSB7CiAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9jYXRpb25zRGF0YSA9IGNvbWJpbmVVS0hpZ2hDaGFydHModGhpcy5jdXJyZW50RGF0YVtpZHhdLmFycik7CiAgICAgICAgICAgICAgICAgfWVsc2UgewogICAgICAgICAgICAgICAgICAgICB0aGlzLmlzRGF0YUF2YWlsYWJsZSA9ICEodGhpcy5pc1VzICYmICh0aGlzLmRhdGFUeXBlID09PSAiY3VyZWQiIHx8IHRoaXMuZGF0YVR5cGUgPT09ICJjUmF0ZSIpKTsKICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2NhdGlvbnNEYXRhID0gY29tYmluZVVTSGlnaENoYXJ0cyh0aGlzLmN1cnJlbnREYXRhW2lkeF0uYXJyLCB0aGlzLmRhdGFUeXBlKTsKICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICB0aGlzLmxvY2F0aW9uc0RhdGEgPSBjb21iaW5lV29ybGRIaWdoQ2hhcnRzKHRoaXMuY3VycmVudERhdGFbaWR4XS5hcnIsIHRoaXMuZGF0YVR5cGUpOwogICAgICAgICAgICAgfQogICAgICAgICAgICAgaWYocmVyZW5kZXIpCiAgICAgICAgICAgICAgICB0aGlzLmZvcmNlUmVyZW5kZXIoKQogICAgICAgICAgfSwKICAgICAgICAgIGZvcmNlUmVyZW5kZXIoKSB7CiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckNvbXBvbmVudCA9IGZhbHNlOwogICAgICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQ29tcG9uZW50ID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgIH0KCiAgICB9Cn0K"},{"version":3,"sources":["MapSection.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAoBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"MapSection.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div class=\"mBlock\">\r\n        <div class=\"switch-header\">\r\n            <DataSwitch :data-type=\"dataType\" @typeChange=\"changeDataType($event)\" :disabled=\"tab === 1 && isUk\"></DataSwitch>\r\n            <CountrySwitch v-if=\"isUk || isUs\" :tab=\"tab\" @changeTab=\"changeTab($event)\"></CountrySwitch>\r\n        </div>\r\n\r\n        <Map v-if=\"renderComponent && isDataAvailable\" :locationsData=\"locationsData\" :countryName=\"tab === 1 ? countryName : 'world'\" :is-rate=\"dataType.includes('Rate')\"></Map>\r\n\r\n        <div v-else style=\"padding: 30px;text-align: center;\">{{$t('noData')}}</div>\r\n\r\n        <div style=\"text-align: left;opacity: 0.3;\">*Data is incomplete, source: GOV.UK, isjeffcom and JHU.</div>\r\n\r\n        <SlideController v-if=\"date\" :start-date=\"currentData[0].date\" :end-date=\"currentData[currentData.length-1].date\"\r\n                         :hidePlayButton=\"true\" :current-date=\"date\" @change=\"changeDate\" :lazy=\"false\"\r\n                         :enableEvenIfPaused=\"true\" :playing=\"false\"></SlideController>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import Map from \"./Map.vue\";\r\n    import DataSwitch from './DataSwitch';\r\n    import CountrySwitch from './CountrySwitch';\r\n    import {\r\n        combineUKHighCharts,\r\n        combineUSHighCharts,\r\n        combineWorldHighCharts,\r\n        getSmallerDate\r\n    } from \"../js/locationUtils\"\r\n    import SlideController from './SlideController'\r\n    export default {\r\n        name: \"MapSection\",\r\n        components:{\r\n            SlideController,\r\n            Map,\r\n            DataSwitch,\r\n            CountrySwitch\r\n        },\r\n        props: {\r\n            tableData: Object,\r\n            countryName: String,\r\n            mainDate: String\r\n        },\r\n        data: function () {\r\n            return {\r\n                currentData: null,\r\n                tab: 1,\r\n                locationsData: null,\r\n                isUk: true,\r\n                isUs: false,\r\n                isDataAvailable: true,\r\n                date: null,\r\n                renderComponent: true,\r\n                dataType: \"confirmed\"\r\n            }\r\n        },\r\n        mounted() {\r\n            this.isUk = this.countryName===\"UK\";\r\n            this.isUs = this.countryName===\"US\";\r\n            this.changeTab(this.isUk || this.isUs ? 1 : 0);\r\n        },\r\n        watch: {\r\n            mainDate: function () {\r\n                if(this.mainDate) {\r\n                    let dateToChange = getSmallerDate(this.mainDate, this.currentData[this.currentData.length-1].date);\r\n                    this.changeDate(dateToChange)\r\n                }\r\n            }\r\n        },\r\n        methods: {\r\n            changeDate: function(date){\r\n                this.date = date;\r\n                this.loadMap()\r\n            },\r\n            changeTab(tab){\r\n                this.tab = tab;\r\n                if((this.isUk || this.isUs) && this.tab === 1){\r\n                    this.currentData = this.tableData.country;\r\n                }else {\r\n                    this.currentData = this.tableData.global;\r\n                }\r\n                this.date = this.currentData[this.currentData.length-1].date;\r\n                this.loadMap(true)\r\n            },\r\n            changeDataType(type){\r\n                this.dataType = type;\r\n                this.loadMap()\r\n            },\r\n            async loadMap(rerender){\r\n                 let idx = this.currentData.findIndex(ele=>ele.date === this.date);\r\n                this.isDataAvailable = true;\r\n                 if(this.tab === 1) {\r\n                     if(this.isUk) {\r\n                         this.locationsData = combineUKHighCharts(this.currentData[idx].arr);\r\n                     }else {\r\n                         this.isDataAvailable = !(this.isUs && (this.dataType === \"cured\" || this.dataType === \"cRate\"));\r\n                         this.locationsData = combineUSHighCharts(this.currentData[idx].arr, this.dataType);\r\n                     }\r\n                 }else{\r\n                     this.locationsData = combineWorldHighCharts(this.currentData[idx].arr, this.dataType);\r\n                 }\r\n                 if(rerender)\r\n                    this.forceRerender()\r\n              },\r\n              forceRerender() {\r\n                    this.renderComponent = false;\r\n                    this.$nextTick(() => {\r\n                        this.renderComponent = true;\r\n                    });\r\n               }\r\n\r\n        }\r\n    }\r\n</script>\r\n\r\n<style>\r\n\r\n</style>"]}]}