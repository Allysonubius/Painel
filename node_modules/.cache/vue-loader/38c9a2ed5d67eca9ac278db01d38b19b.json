{"remainingRequest":"C:\\Users\\allys\\Documents\\GIT\\PaineCovid19\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\allys\\Documents\\GIT\\PaineCovid19\\src\\components\\BarRace.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\allys\\Documents\\GIT\\PaineCovid19\\src\\components\\BarRace.vue","mtime":1590605624602},{"path":"C:\\Users\\allys\\Documents\\GIT\\PaineCovid19\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\allys\\Documents\\GIT\\PaineCovid19\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\allys\\Documents\\GIT\\PaineCovid19\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\allys\\Documents\\GIT\\PaineCovid19\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8qIGVzbGludC1kaXNhYmxlICovCmltcG9ydCBTbGlkZUNvbnRyb2xsZXIgZnJvbSAnLi9TbGlkZUNvbnRyb2xsZXInCmltcG9ydCB7aXNEYXRlVmFsaWR9IGZyb20gJy4uL2pzL2xvY2F0aW9uVXRpbHMnCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICJCYXJSYWNlIiwKICAgIGNvbXBvbmVudHM6IHsKICAgICAgICBTbGlkZUNvbnRyb2xsZXIKICAgIH0sCiAgICBwcm9wczogewogICAgICAgIHJhY2VEYXRhOiBBcnJheSwKICAgICAgICB0aXRsZTogU3RyaW5nLAogICAgICAgIHN1YnRpdGxlOiBTdHJpbmcsCiAgICAgICAgc291cmNlOiBTdHJpbmcsCiAgICAgICAgaWQ6U3RyaW5nLAogICAgICAgIGNoYW5nZUxhYmVsUG9zaXRpb246IEJvb2xlYW4sCiAgICAgICAgaXNSYXRlOiBCb29sZWFuLAogICAgICAgIGNvbG9yOiBTdHJpbmcsCiAgICAgICAgbWFpbkRhdGU6IFN0cmluZwogICAgfSwKICAgIGRhdGE6ZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHdpZHRoOjUwMCwKICAgICAgICAgICAgZGF5OiIiLAogICAgICAgICAgICBwbGF5aW5nOiB0cnVlLAogICAgICAgICAgICBzdGFydERhdGU6ICIiLAogICAgICAgICAgICBlbmREYXRlOiAiIiwKICAgICAgICB9CiAgICB9LAogICAgY3JlYXRlZCgpIHsKICAgICAgICAvLyB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigicmVzaXplIiwgdGhpcy5yZXNpemVFdmVudEhhbmRsZXIpOwogICAgfSwKICAgIGRlc3Ryb3llZCgpIHsKICAgICAgICAvLyBjb25zb2xlLmxvZygiZGVzdG9yeWVkIik7CiAgICAgICAgLy8gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoInJlc2l6ZSIsIHRoaXMucmVzaXplRXZlbnRIYW5kbGVyKTsKICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgcmVzaXplRXZlbnRIYW5kbGVyKCkgewogICAgICAgICAgICBpZih0aGlzLiRyZWZzLnBhcmVudCl7CiAgICAgICAgICAgICAgICB0aGlzLndpZHRoID0gdGhpcy4kcmVmcy5wYXJlbnQuY2xpZW50V2lkdGg7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gdGhpcy53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoPjUxMD81MTA6IHdpbmRvdy5pbm5lcldpZHRoLTU1OwogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLndpZHRoKQogICAgICAgIH0sCiAgICAgICAgY2hhbmdlRGF0ZShlKXsKICAgICAgICAgICAgdGhpcy5kYXkgPSBlOwogICAgICAgICAgICB0aGlzLmVtaXREYXRlQ2hhbmdlKGUpCiAgICAgICAgfSwKICAgICAgICBlbWl0RGF0ZUNoYW5nZShlKXsKICAgICAgICAgICAgdGhpcy4kZW1pdCgnZGF0ZUNoYW5nZScsIGUpCiAgICAgICAgfQogICAgfSwKICAgIG1vdW50ZWQoKSB7CiAgICAgICAgY29uc3QgbW9tZW50ID0gcmVxdWlyZSgnbW9tZW50Jyk7CiAgICAgICAgdGhpcy5yZXNpemVFdmVudEhhbmRsZXIoKTsKICAgICAgICB0aGlzLnN0YXJ0RGF0ZSA9IHRoaXMucmFjZURhdGFbMF0uZGF5OwogICAgICAgIHRoaXMuZW5kRGF0ZSA9IHRoaXMucmFjZURhdGFbdGhpcy5yYWNlRGF0YS5sZW5ndGgtMV0uZGF5OwogICAgICAgIGNvbnN0IGQzID0gcmVxdWlyZSgnZDMnKTsKICAgICAgICAvL3JlZiBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9qcnppZWYvNzBmMWY4YTVkMDY2YTI4NmRhM2ExZTY5OTgyMzQ3MGYgTkVFRCBSRUZBQ1RPUiBUSE8sIG5vIHRpbWUgeWV0CiAgICAgICAgLy8gRmVlbCBmcmVlIHRvIGNoYW5nZSBvciBkZWxldGUgYW55IG9mIHRoZSBjb2RlIHlvdSBzZWUgaW4gdGhpcyBlZGl0b3IhCiAgICAgICAgbGV0IHN2ZyA9IGQzLnNlbGVjdCgiI2JhclJhY2UiKS5hcHBlbmQoInN2ZyIpCiAgICAgICAgICAgIC5hdHRyKCJ3aWR0aCIsIHRoaXMud2lkdGgpCiAgICAgICAgICAgIC5hdHRyKCJoZWlnaHQiLCA1MDApOwoKICAgICAgICBsZXQgdGlja0R1cmF0aW9uID0gMTAwMDsKCiAgICAgICAgbGV0IHRvcF9uID0gMTI7CiAgICAgICAgbGV0IGhlaWdodCA9IDUwMDsKICAgICAgICBsZXQgd2lkdGggPSB0aGlzLndpZHRoOwoKICAgICAgICBjb25zdCBtYXJnaW4gPSB7CiAgICAgICAgICAgIHRvcDogMzAsCiAgICAgICAgICAgIHJpZ2h0OiAwLAogICAgICAgICAgICBib3R0b206IDUsCiAgICAgICAgICAgIGxlZnQ6IDAKICAgICAgICB9OwoKICAgICAgICBsZXQgYmFyUGFkZGluZyA9IChoZWlnaHQtKG1hcmdpbi5ib3R0b20rbWFyZ2luLnRvcCkpLyh0b3Bfbio1KTsKCiAgICAgICAgLy8gbGV0IHRpdGxlID0gc3ZnLmFwcGVuZCgndGV4dCcpCiAgICAgICAgLy8gICAgIC5hdHRyKCdjbGFzcycsICd0aXRsZScpCiAgICAgICAgLy8gICAgIC5hdHRyKCd5JywgMjQpCiAgICAgICAgLy8gICAgIC5odG1sKHRoaXMudGl0bGUpOwogICAgICAgIC8vCiAgICAgICAgLy8gbGV0IHN1YlRpdGxlID0gc3ZnLmFwcGVuZCgidGV4dCIpCiAgICAgICAgLy8gICAgIC5hdHRyKCJjbGFzcyIsICJzdWJUaXRsZSIpCiAgICAgICAgLy8gICAgIC5hdHRyKCJ5IiwgNTUpCiAgICAgICAgLy8gICAgIC5odG1sKHRoaXMuc3VidGl0bGUpOwoKICAgICAgICBsZXQgY2FwdGlvbiA9IHN2Zy5hcHBlbmQoJ3RleHQnKQogICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnY2FwdGlvbicpCiAgICAgICAgICAgIC5hdHRyKCd4Jywgd2lkdGgpCiAgICAgICAgICAgIC5hdHRyKCd5JywgaGVpZ2h0LTUpCiAgICAgICAgICAgIC5zdHlsZSgndGV4dC1hbmNob3InLCAnZW5kJykKICAgICAgICAgICAgLmh0bWwoIsKpY292aWQxOXRyYWNrLnNpdGUgfCBEYXRhIMKpSkhVIik7CgogICAgICAgIHRoaXMuZGF5ID0gIHRoaXMubWFpbkRhdGUgJiYgaXNEYXRlVmFsaWQodGhpcy5tYWluRGF0ZSwgdGhpcy5yYWNlRGF0YVswXS5kYXksIHRoaXMucmFjZURhdGFbdGhpcy5yYWNlRGF0YS5sZW5ndGgtMV0uZGF5ICkgPyB0aGlzLm1haW5EYXRlIDogIHRoaXMucmFjZURhdGFbMF0uZGF5OwoKICAgICAgICBsZXQgdG90YWxTdHJpbmcgPSB0aGlzLiR0KCd0b3RhbCcpOwogICAgICAgIGxldCB0aGF0ID0gdGhpczsKCiAgICAgICAgZnVuY3Rpb24gbG9hZERhdGEoZGF0YSkgewogICAgICAgICAgICAvL2lmIChlcnJvcikgdGhyb3cgZXJyb3I7CgogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhkYXRhKTsKCiAgICAgICAgICAgIGRhdGEuZm9yRWFjaChkID0+IHsKICAgICAgICAgICAgICAgIGQudmFsdWUgPSArZC52YWx1ZSwKICAgICAgICAgICAgICAgICAgICBkLmxhc3RWYWx1ZSA9IGQubGFzdFZhbHVlPDA/IDA6ICtkLmxhc3RWYWx1ZSwKICAgICAgICAgICAgICAgICAgICBkLnZhbHVlID0gaXNOYU4oZC52YWx1ZSkgJiYgZC52YWx1ZSA8IDAgPyAwIDogZC52YWx1ZSwKICAgICAgICAgICAgICAgICAgICBkLmNvbG91ciA9IHRoYXQuY29sb3I/dGhhdC5jb2xvcjoiIzMzQ0NGRiIKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhkYXRhKTsKCiAgICAgICAgICAgIGxldCBkYXlTbGljZSA9IGRhdGEuZmlsdGVyKGQgPT4gZC5kYXkgPT0gdGhhdC5kYXkgJiYgIWlzTmFOKGQudmFsdWUpKQogICAgICAgICAgICAgICAgLnNvcnQoKGEsYikgPT4gYi52YWx1ZSAtIGEudmFsdWUpCiAgICAgICAgICAgICAgICAuc2xpY2UoMCwgdG9wX24pOwoKICAgICAgICAgICAgZGF5U2xpY2UuZm9yRWFjaCgoZCxpKSA9PiBkLnJhbmsgPSBpKTsKCiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdkYXlTbGljZTogJywgZGF5U2xpY2UpCgoKICAgICAgICAgICAgY29uc3QgZ2V0Q2xhc3NOYW1lID0gKGQpPT4iYmFyXyIrZC5uYW1lLnJlcGxhY2UoL1teXHddL2csICJfIik7CgogICAgICAgICAgICBjb25zdCBpc1Rvb1NtYWxsID0gKGQpPT57CiAgICAgICAgICAgICAgICBsZXQgdGhlQmFyID0gZDMuc2VsZWN0KGAuJHtnZXRDbGFzc05hbWUoZCl9YCk7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhlQmFyPy5ub2RlKCk/LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoIDwgMTAwCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGNvbnN0IGdldE91dHNpZGVXaWR0aCA9IChkKSA9PiB4KGQudmFsdWUpKzE1KyhkLnZhbHVlLnRvRml4ZWQoMCkpLmxlbmd0aCoxMDsKCiAgICAgICAgICAgIGNvbnN0IGdldExhYmVsWCA9IChkKT0+dGhhdC5jaGFuZ2VMYWJlbFBvc2l0aW9uICYmIGlzVG9vU21hbGwoZCk/Z2V0T3V0c2lkZVdpZHRoKGQpOiB4KGQudmFsdWUpLTg7CiAgICAgICAgICAgIGNvbnN0IGdldExhYmVsQW5jaG9yID0gKGQpPT50aGF0LmNoYW5nZUxhYmVsUG9zaXRpb24gJiYgaXNUb29TbWFsbChkKT8nc3RhcnQnOidlbmQnOwoKCgogICAgICAgICAgICBsZXQgeCA9IGQzLnNjYWxlTGluZWFyKCkKICAgICAgICAgICAgICAgIC5kb21haW4oWzAsIGQzLm1heChkYXlTbGljZSwgZCA9PiBkLnZhbHVlKV0pCiAgICAgICAgICAgICAgICAucmFuZ2UoW21hcmdpbi5sZWZ0LCB3aWR0aC1tYXJnaW4ucmlnaHQtNjVdKTsKCiAgICAgICAgICAgIGxldCB5ID0gZDMuc2NhbGVMaW5lYXIoKQogICAgICAgICAgICAgICAgLmRvbWFpbihbdG9wX24sIDBdKQogICAgICAgICAgICAgICAgLnJhbmdlKFtoZWlnaHQtbWFyZ2luLmJvdHRvbSwgbWFyZ2luLnRvcF0pOwoKICAgICAgICAgICAgbGV0IHhBeGlzID0gZDMuYXhpc1RvcCgpCiAgICAgICAgICAgICAgICAuc2NhbGUoeCkKICAgICAgICAgICAgICAgIC50aWNrcyh3aWR0aCA+IDUwMCA/IDU6MikKICAgICAgICAgICAgICAgIC50aWNrU2l6ZSgtKGhlaWdodC1tYXJnaW4udG9wLW1hcmdpbi5ib3R0b20pKQogICAgICAgICAgICAgICAgLnRpY2tGb3JtYXQoZCA9PiBkMy5mb3JtYXQoJywnKShkKSk7CgogICAgICAgICAgICBzdmcuYXBwZW5kKCdnJykKICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdheGlzIHhBeGlzJykKICAgICAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKDAsICR7bWFyZ2luLnRvcH0pYCkKICAgICAgICAgICAgICAgIC5jYWxsKHhBeGlzKQogICAgICAgICAgICAgICAgLnNlbGVjdEFsbCgnLnRpY2sgbGluZScpCiAgICAgICAgICAgICAgICAuY2xhc3NlZCgnb3JpZ2luJywgZCA9PiBkID09IDApOwoKICAgICAgICAgICAgc3ZnLnNlbGVjdEFsbCgncmVjdC5iYXInKQogICAgICAgICAgICAgICAgLmRhdGEoZGF5U2xpY2UsIGQgPT4gZC5uYW1lKQogICAgICAgICAgICAgICAgLmVudGVyKCkKICAgICAgICAgICAgICAgIC5hcHBlbmQoJ3JlY3QnKQogICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgZCA9PiAgYGJhciAke2dldENsYXNzTmFtZShkKX1gKQogICAgICAgICAgICAgICAgLmF0dHIoJ3gnLCB4KDApKzEpCiAgICAgICAgICAgICAgICAuYXR0cignd2lkdGgnLCBkID0+ICh4KGQudmFsdWUpLXgoMCktMSk8MD8wOih4KGQudmFsdWUpLXgoMCktMSkpCiAgICAgICAgICAgICAgICAuYXR0cigneScsIGQgPT4geShkLnJhbmspKzUpCiAgICAgICAgICAgICAgICAuYXR0cignaGVpZ2h0JywgeSgxKS15KDApLWJhclBhZGRpbmcpCiAgICAgICAgICAgICAgICAuc3R5bGUoJ2ZpbGwnLCBkID0+IGQuY29sb3VyKTsKCiAgICAgICAgICAgIHN2Zy5zZWxlY3RBbGwoJ3RleHQubGFiZWwnKQogICAgICAgICAgICAgICAgLmRhdGEoZGF5U2xpY2UsIGQgPT4gZC5uYW1lKQogICAgICAgICAgICAgICAgLmVudGVyKCkKICAgICAgICAgICAgICAgIC5hcHBlbmQoJ3RleHQnKQogICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xhYmVsJykKICAgICAgICAgICAgICAgIC5hdHRyKCd4JywgZCA9PiBnZXRMYWJlbFgoZCkpCiAgICAgICAgICAgICAgICAuYXR0cigneScsIGQgPT4geShkLnJhbmspKzUrKCh5KDEpLXkoMCkpLzIpKzEpCiAgICAgICAgICAgICAgICAuc3R5bGUoJ3RleHQtYW5jaG9yJyxkID0+ICBnZXRMYWJlbEFuY2hvcihkKSkKICAgICAgICAgICAgICAgIC5zdHlsZSgnY29sb3InLCAnd2hpdGUnKQogICAgICAgICAgICAgICAgLmh0bWwoZCA9PiBkLm5hbWUpOwoKICAgICAgICAgICAgc3ZnLnNlbGVjdEFsbCgndGV4dC52YWx1ZUxhYmVsJykKICAgICAgICAgICAgICAgIC5kYXRhKGRheVNsaWNlLCBkID0+IGQubmFtZSkKICAgICAgICAgICAgICAgIC5lbnRlcigpCiAgICAgICAgICAgICAgICAuYXBwZW5kKCd0ZXh0JykKICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICd2YWx1ZUxhYmVsJykKICAgICAgICAgICAgICAgIC5hdHRyKCd4JywgZCA9PiB4KGQudmFsdWUpKzUpCiAgICAgICAgICAgICAgICAuYXR0cigneScsIGQgPT4geShkLnJhbmspKzUrKCh5KDEpLXkoMCkpLzIpKzEpCiAgICAgICAgICAgICAgICAudGV4dChkID0+IGQzLmZvcm1hdCgnLC4wZicpKGQubGFzdFZhbHVlKSk7CgogICAgICAgICAgICBsZXQgZGF5VGV4dCA9IHN2Zy5hcHBlbmQoJ3RleHQnKQogICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2RheVRleHQnKQogICAgICAgICAgICAgICAgLmF0dHIoJ3gnLCB3aWR0aC1tYXJnaW4ucmlnaHQpCiAgICAgICAgICAgICAgICAuYXR0cigneScsIGhlaWdodC02MCkKICAgICAgICAgICAgICAgIC5zdHlsZSgndGV4dC1hbmNob3InLCAnZW5kJykKICAgICAgICAgICAgICAgIC5odG1sKHRoYXQuZGF5KTsKICAgICAgICAgICAgICAgIC8vIC5jYWxsKGhhbG8sIDEwKTsKCiAgICAgICAgICAgIGxldCB0b3RhbFRleHQgPSBzdmcuYXBwZW5kKCd0ZXh0JykKICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICd0b3RhbFRleHQnKQogICAgICAgICAgICAgICAgLmF0dHIoJ3gnLCB3aWR0aC1tYXJnaW4ucmlnaHQpCiAgICAgICAgICAgICAgICAuYXR0cigneScsIGhlaWdodC0zMCkKICAgICAgICAgICAgICAgIC5zdHlsZSgndGV4dC1hbmNob3InLCAnZW5kJykKICAgICAgICAgICAgICAgIC5odG1sKHRvdGFsU3RyaW5nICsgIiAtIDAiKTsKCiAgICAgICAgICAgIGxldCB0b3RhbCA9IDA7CgogICAgICAgICAgICBsZXQgdGlja2VyID0gZDMuaW50ZXJ2YWwoZSA9PiB7CiAgICAgICAgICAgICAgICBpZighdGhhdC5wbGF5aW5nKSByZXR1cm47CiAgICAgICAgICAgICAgICB0aGF0LnJlc2l6ZUV2ZW50SGFuZGxlcigpOwoKICAgICAgICAgICAgICAgIGRheVNsaWNlID0gZGF0YS5maWx0ZXIoZCA9PiBkLmRheSA9PSB0aGF0LmRheSAmJiAhaXNOYU4oZC52YWx1ZSkpCiAgICAgICAgICAgICAgICAgICAgLnNvcnQoKGEsYikgPT4gYi52YWx1ZSAtIGEudmFsdWUpOwoKICAgICAgICAgICAgICAgIHRvdGFsID0gZGF5U2xpY2UucmVkdWNlKChhY2N1bXVsYXRvciwgY3VycmVudFZhbHVlKSA9PiBhY2N1bXVsYXRvciArIGN1cnJlbnRWYWx1ZS52YWx1ZSwgMCk7CgogICAgICAgICAgICAgICAgaWYodGhhdC5pc1JhdGUpewogICAgICAgICAgICAgICAgICAgIHRvdGFsVGV4dC50ZXh0KGQgPT4gIkRhdGEgQXZlcmFnZSAtICIgKyBkMy5mb3JtYXQoJywuMmYnKSh0b3RhbC9kYXlTbGljZS5sZW5ndGgpKyIlIik7CiAgICAgICAgICAgICAgICB9ZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdG90YWxUZXh0LnRleHQoZCA9PiB0b3RhbFN0cmluZyArICIgLSAiICsgZDMuZm9ybWF0KCcsLjBmJykodG90YWwpKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBkYXlTbGljZSA9IGRheVNsaWNlLnNsaWNlKDAsdG9wX24pOwoKICAgICAgICAgICAgICAgIGRheVNsaWNlLmZvckVhY2goKGQsaSkgPT4gZC5yYW5rID0gaSk7CgogICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ0ludGVydmFsZGF5OiAnLCBkYXlTbGljZSk7CgogICAgICAgICAgICAgICAgeC5kb21haW4oWzAsIGQzLm1heChkYXlTbGljZSwgZCA9PiBkLnZhbHVlKV0pOwoKICAgICAgICAgICAgICAgIHN2Zy5zZWxlY3QoJy54QXhpcycpCiAgICAgICAgICAgICAgICAgICAgLnRyYW5zaXRpb24oKQogICAgICAgICAgICAgICAgICAgIC5kdXJhdGlvbih0aWNrRHVyYXRpb24pCiAgICAgICAgICAgICAgICAgICAgLmVhc2UoZDMuZWFzZUxpbmVhcikKICAgICAgICAgICAgICAgICAgICAuY2FsbCh4QXhpcyk7CgogICAgICAgICAgICAgICAgbGV0IGJhcnMgPSBzdmcuc2VsZWN0QWxsKCcuYmFyJykuZGF0YShkYXlTbGljZSwgZCA9PiBkLm5hbWUpOwoKICAgICAgICAgICAgICAgIGJhcnMKICAgICAgICAgICAgICAgICAgICAuZW50ZXIoKQogICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJ3JlY3QnKQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsIGQgPT4gYGJhciAke2dldENsYXNzTmFtZShkKX1gKQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCd4JywgeCgwKSsxKQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCAnd2lkdGgnLCBkID0+ICh4KGQudmFsdWUpLXgoMCktMSk8MD8wOih4KGQudmFsdWUpLXgoMCktMSkpCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3knLCBkID0+IHkodG9wX24rMSkrNSkKICAgICAgICAgICAgICAgICAgICAuYXR0cignaGVpZ2h0JywgeSgxKS15KDApLWJhclBhZGRpbmcpCiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCdmaWxsJywgZCA9PiBkLmNvbG91cikKICAgICAgICAgICAgICAgICAgICAudHJhbnNpdGlvbigpCiAgICAgICAgICAgICAgICAgICAgLmR1cmF0aW9uKHRpY2tEdXJhdGlvbikKICAgICAgICAgICAgICAgICAgICAuZWFzZShkMy5lYXNlTGluZWFyKQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCd5JywgZCA9PiB5KGQucmFuaykrNSk7CgogICAgICAgICAgICAgICAgYmFycwogICAgICAgICAgICAgICAgICAgIC50cmFuc2l0aW9uKCkKICAgICAgICAgICAgICAgICAgICAuZHVyYXRpb24odGlja0R1cmF0aW9uKQogICAgICAgICAgICAgICAgICAgIC5lYXNlKGQzLmVhc2VMaW5lYXIpCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3dpZHRoJywgZCA9PiAoeChkLnZhbHVlKS14KDApLTEpPDA/MDooeChkLnZhbHVlKS14KDApLTEpKQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCd5JywgZCA9PiB5KGQucmFuaykrNSk7CgogICAgICAgICAgICAgICAgYmFycwogICAgICAgICAgICAgICAgICAgIC5leGl0KCkKICAgICAgICAgICAgICAgICAgICAudHJhbnNpdGlvbigpCiAgICAgICAgICAgICAgICAgICAgLmR1cmF0aW9uKHRpY2tEdXJhdGlvbikKICAgICAgICAgICAgICAgICAgICAuZWFzZShkMy5lYXNlTGluZWFyKQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIGQgPT4gKHgoZC52YWx1ZSkteCgwKS0xKTwwPzA6KHgoZC52YWx1ZSkteCgwKS0xKSkKICAgICAgICAgICAgICAgICAgICAuYXR0cigneScsIGQgPT4geSh0b3BfbisxKSs1KQogICAgICAgICAgICAgICAgICAgIC5yZW1vdmUoKTsKCiAgICAgICAgICAgICAgICBsZXQgbGFiZWxzID0gc3ZnLnNlbGVjdEFsbCgnLmxhYmVsJykKICAgICAgICAgICAgICAgICAgICAuZGF0YShkYXlTbGljZSwgZCA9PiBkLm5hbWUpOwoKCgogICAgICAgICAgICAgICAgbGFiZWxzCiAgICAgICAgICAgICAgICAgICAgLmVudGVyKCkKICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCd0ZXh0JykKICAgICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnbGFiZWwnKQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCd4JywgZCA9PiBnZXRMYWJlbFgoZCkpCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3knLCBkID0+IHkodG9wX24rMSkrNSsoKHkoMSkteSgwKSkvMikpCiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCd0ZXh0LWFuY2hvcicsICBkID0+IGdldExhYmVsQW5jaG9yKGQpKQogICAgICAgICAgICAgICAgICAgIC5zdHlsZSgnY29sb3InLCAnd2hpdGUnKQogICAgICAgICAgICAgICAgICAgIC5odG1sKGQgPT4gZC5uYW1lKQogICAgICAgICAgICAgICAgICAgIC50cmFuc2l0aW9uKCkKICAgICAgICAgICAgICAgICAgICAuZHVyYXRpb24odGlja0R1cmF0aW9uKQogICAgICAgICAgICAgICAgICAgIC5lYXNlKGQzLmVhc2VMaW5lYXIpCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3knLCBkID0+IHkoZC5yYW5rKSs1KygoeSgxKS15KDApKS8yKSsxKTsKCgogICAgICAgICAgICAgICAgbGFiZWxzCiAgICAgICAgICAgICAgICAgICAgLnRyYW5zaXRpb24oKQogICAgICAgICAgICAgICAgICAgIC5kdXJhdGlvbih0aWNrRHVyYXRpb24pCiAgICAgICAgICAgICAgICAgICAgLmVhc2UoZDMuZWFzZUxpbmVhcikKICAgICAgICAgICAgICAgICAgICAuYXR0cigneCcsIGQgPT4gZ2V0TGFiZWxYKGQpKQogICAgICAgICAgICAgICAgICAgIC5zdHlsZSgndGV4dC1hbmNob3InLCAgZCA9PiBnZXRMYWJlbEFuY2hvcihkKSkKICAgICAgICAgICAgICAgICAgICAuYXR0cigneScsIGQgPT4geShkLnJhbmspKzUrKCh5KDEpLXkoMCkpLzIpKzEpOwoKICAgICAgICAgICAgICAgIGxhYmVscwogICAgICAgICAgICAgICAgICAgIC5leGl0KCkKICAgICAgICAgICAgICAgICAgICAudHJhbnNpdGlvbigpCiAgICAgICAgICAgICAgICAgICAgLmR1cmF0aW9uKHRpY2tEdXJhdGlvbikKICAgICAgICAgICAgICAgICAgICAuZWFzZShkMy5lYXNlTGluZWFyKQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCd4JywgZCA9PiBnZXRMYWJlbFgoZCkpCiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCd0ZXh0LWFuY2hvcicsICBkID0+IGdldExhYmVsQW5jaG9yKGQpKQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCd5JywgZCA9PiB5KHRvcF9uKzEpKzUpCiAgICAgICAgICAgICAgICAgICAgLnJlbW92ZSgpOwoKCgogICAgICAgICAgICAgICAgbGV0IHZhbHVlTGFiZWxzID0gc3ZnLnNlbGVjdEFsbCgnLnZhbHVlTGFiZWwnKS5kYXRhKGRheVNsaWNlLCBkID0+IGQubmFtZSk7CgogICAgICAgICAgICAgICAgdmFsdWVMYWJlbHMKICAgICAgICAgICAgICAgICAgICAuZW50ZXIoKQogICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJ3RleHQnKQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICd2YWx1ZUxhYmVsJykKICAgICAgICAgICAgICAgICAgICAuYXR0cigneCcsIGQgPT4geChkLnZhbHVlKSs1KQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCd5JywgZCA9PiB5KHRvcF9uKzEpKzUpCiAgICAgICAgICAgICAgICAgICAgLnRleHQoZCA9PiBkMy5mb3JtYXQoJywuMGYnKShkLmxhc3RWYWx1ZSkpCiAgICAgICAgICAgICAgICAgICAgLnRyYW5zaXRpb24oKQogICAgICAgICAgICAgICAgICAgIC5kdXJhdGlvbih0aWNrRHVyYXRpb24pCiAgICAgICAgICAgICAgICAgICAgLmVhc2UoZDMuZWFzZUxpbmVhcikKICAgICAgICAgICAgICAgICAgICAuYXR0cigneScsIGQgPT4geShkLnJhbmspKzUrKCh5KDEpLXkoMCkpLzIpKzEpOwoKICAgICAgICAgICAgICAgIHZhbHVlTGFiZWxzCiAgICAgICAgICAgICAgICAgICAgLnRyYW5zaXRpb24oKQogICAgICAgICAgICAgICAgICAgIC5kdXJhdGlvbih0aWNrRHVyYXRpb24pCiAgICAgICAgICAgICAgICAgICAgLmVhc2UoZDMuZWFzZUxpbmVhcikKICAgICAgICAgICAgICAgICAgICAuYXR0cigneCcsIGQgPT4geChkLnZhbHVlKSs1KQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCd5JywgZCA9PiB5KGQucmFuaykrNSsoKHkoMSkteSgwKSkvMikrMSkKICAgICAgICAgICAgICAgICAgICAudHdlZW4oInRleHQiLCBmdW5jdGlvbihkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpID0gZDMuaW50ZXJwb2xhdGVSb3VuZChkLmxhc3RWYWx1ZSwgZC52YWx1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRleHRDb250ZW50ID0gZDMuZm9ybWF0KCcsJykoaSh0KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgfSk7CgoKICAgICAgICAgICAgICAgIHZhbHVlTGFiZWxzCiAgICAgICAgICAgICAgICAgICAgLmV4aXQoKQogICAgICAgICAgICAgICAgICAgIC50cmFuc2l0aW9uKCkKICAgICAgICAgICAgICAgICAgICAuZHVyYXRpb24odGlja0R1cmF0aW9uKQogICAgICAgICAgICAgICAgICAgIC5lYXNlKGQzLmVhc2VMaW5lYXIpCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3gnLCBkID0+IHgoZC52YWx1ZSkrNSkKICAgICAgICAgICAgICAgICAgICAuYXR0cigneScsIGQgPT4geSh0b3BfbisxKSs1KQogICAgICAgICAgICAgICAgICAgIC5yZW1vdmUoKTsKCiAgICAgICAgICAgICAgICBkYXlUZXh0Lmh0bWwodGhhdC5kYXkpOwogICAgICAgICAgICAgICAgdGhhdC5lbWl0RGF0ZUNoYW5nZSh0aGF0LmRheSk7CgogICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRNb21lbnQgPSBtb21lbnQodGhhdC5kYXkrJyAyMDIwJywgd2luZG93LmRhdGVGb3JtYXQgKyAnIFlZWVknKTsKICAgICAgICAgICAgICAgIGxldCBlbmRNb21lbnQgPSBtb21lbnQoZGF0YVtkYXRhLmxlbmd0aC0xXS5kYXkrJyAyMDIwJywgd2luZG93LmRhdGVGb3JtYXQgKyAnIFlZWVknKTsKICAgICAgICAgICAgICAgIC8vIGRheSA9IGQzLmZvcm1hdCgnLjFmJykoKCtkYXkpICsgMC4xKTsKICAgICAgICAgICAgICAgIHRoYXQuZGF5ID0gY3VycmVudE1vbWVudC5hZGQoMSwgJ2RheXMnKS5mb3JtYXQod2luZG93LmRhdGVGb3JtYXQpOwogICAgICAgICAgICAgICAgaWYoY3VycmVudE1vbWVudC5pc0FmdGVyKGVuZE1vbWVudCkpIHRoYXQuZGF5PSBkYXRhWzBdLmRheTsKICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGRheSkKICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGRheSkKICAgICAgICAgICAgfSx0aWNrRHVyYXRpb24pOwoKICAgICAgICB9CiAgICAgICAgbG9hZERhdGEodGhpcy5yYWNlRGF0YSk7CgoKICAgICAgICAvLyBjb25zdCBoYWxvID0gZnVuY3Rpb24odGV4dCwgc3Ryb2tlV2lkdGgpIHsKICAgICAgICAvLyAgICAgdGV4dC5zZWxlY3QoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMuY2xvbmVOb2RlKHRydWUpLCB0aGlzKTsgfSkKICAgICAgICAvLyAgICAgICAgIC5zdHlsZSgnZmlsbCcsICcjZmZmZmZmJykKICAgICAgICAvLyAgICAgICAgIC5zdHlsZSggJ3N0cm9rZScsJyNmZmZmZmYnKQogICAgICAgIC8vICAgICAgICAgLnN0eWxlKCdzdHJva2Utd2lkdGgnLCBzdHJva2VXaWR0aCkKICAgICAgICAvLyAgICAgICAgIC5zdHlsZSgnc3Ryb2tlLWxpbmVqb2luJywgJ3JvdW5kJykKICAgICAgICAvLyAgICAgICAgIC5zdHlsZSgnb3BhY2l0eScsIDEpOwogICAgICAgIC8vCiAgICAgICAgLy8gfQogICAgfQp9Cg=="},{"version":3,"sources":["BarRace.vue"],"names":[],"mappings":";;;;;;;;;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;AAIA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BarRace.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div ref=\"parent\">\r\n        <div class=\"bar_race\" id=\"barRace\"></div>\r\n        <SlideController :start-date=\"startDate\" :end-date=\"endDate\" :current-date=\"day\" @change=\"changeDate\" @playPause=\"playing = $event\"></SlideController>\r\n    </div>\r\n\r\n</template>\r\n\r\n<script>\r\n    /* eslint-disable */\r\n    import SlideController from './SlideController'\r\n    import {isDateValid} from '../js/locationUtils'\r\n    export default {\r\n        name: \"BarRace\",\r\n        components: {\r\n            SlideController\r\n        },\r\n        props: {\r\n            raceData: Array,\r\n            title: String,\r\n            subtitle: String,\r\n            source: String,\r\n            id:String,\r\n            changeLabelPosition: Boolean,\r\n            isRate: Boolean,\r\n            color: String,\r\n            mainDate: String\r\n        },\r\n        data:function () {\r\n            return {\r\n                width:500,\r\n                day:\"\",\r\n                playing: true,\r\n                startDate: \"\",\r\n                endDate: \"\",\r\n            }\r\n        },\r\n        created() {\r\n            // window.addEventListener(\"resize\", this.resizeEventHandler);\r\n        },\r\n        destroyed() {\r\n            // console.log(\"destoryed\");\r\n            // window.removeEventListener(\"resize\", this.resizeEventHandler);\r\n        },\r\n        methods: {\r\n            resizeEventHandler() {\r\n                if(this.$refs.parent){\r\n                    this.width = this.$refs.parent.clientWidth;\r\n                }\r\n                // this.width = window.innerWidth>510?510: window.innerWidth-55;\r\n                // console.log(this.width)\r\n            },\r\n            changeDate(e){\r\n                this.day = e;\r\n                this.emitDateChange(e)\r\n            },\r\n            emitDateChange(e){\r\n                this.$emit('dateChange', e)\r\n            }\r\n        },\r\n        mounted() {\r\n            const moment = require('moment');\r\n            this.resizeEventHandler();\r\n            this.startDate = this.raceData[0].day;\r\n            this.endDate = this.raceData[this.raceData.length-1].day;\r\n            const d3 = require('d3');\r\n            //ref https://gist.github.com/jrzief/70f1f8a5d066a286da3a1e699823470f NEED REFACTOR THO, no time yet\r\n            // Feel free to change or delete any of the code you see in this editor!\r\n            let svg = d3.select(\"#barRace\").append(\"svg\")\r\n                .attr(\"width\", this.width)\r\n                .attr(\"height\", 500);\r\n\r\n            let tickDuration = 1000;\r\n\r\n            let top_n = 12;\r\n            let height = 500;\r\n            let width = this.width;\r\n\r\n            const margin = {\r\n                top: 30,\r\n                right: 0,\r\n                bottom: 5,\r\n                left: 0\r\n            };\r\n\r\n            let barPadding = (height-(margin.bottom+margin.top))/(top_n*5);\r\n\r\n            // let title = svg.append('text')\r\n            //     .attr('class', 'title')\r\n            //     .attr('y', 24)\r\n            //     .html(this.title);\r\n            //\r\n            // let subTitle = svg.append(\"text\")\r\n            //     .attr(\"class\", \"subTitle\")\r\n            //     .attr(\"y\", 55)\r\n            //     .html(this.subtitle);\r\n\r\n            let caption = svg.append('text')\r\n                .attr('class', 'caption')\r\n                .attr('x', width)\r\n                .attr('y', height-5)\r\n                .style('text-anchor', 'end')\r\n                .html(\"©covid19track.site | Data ©JHU\");\r\n\r\n            this.day =  this.mainDate && isDateValid(this.mainDate, this.raceData[0].day, this.raceData[this.raceData.length-1].day ) ? this.mainDate :  this.raceData[0].day;\r\n\r\n            let totalString = this.$t('total');\r\n            let that = this;\r\n\r\n            function loadData(data) {\r\n                //if (error) throw error;\r\n\r\n                // console.log(data);\r\n\r\n                data.forEach(d => {\r\n                    d.value = +d.value,\r\n                        d.lastValue = d.lastValue<0? 0: +d.lastValue,\r\n                        d.value = isNaN(d.value) && d.value < 0 ? 0 : d.value,\r\n                        d.colour = that.color?that.color:\"#33CCFF\"\r\n                });\r\n\r\n                // console.log(data);\r\n\r\n                let daySlice = data.filter(d => d.day == that.day && !isNaN(d.value))\r\n                    .sort((a,b) => b.value - a.value)\r\n                    .slice(0, top_n);\r\n\r\n                daySlice.forEach((d,i) => d.rank = i);\r\n\r\n                // console.log('daySlice: ', daySlice)\r\n\r\n\r\n                const getClassName = (d)=>\"bar_\"+d.name.replace(/[^\\w]/g, \"_\");\r\n\r\n                const isTooSmall = (d)=>{\r\n                    let theBar = d3.select(`.${getClassName(d)}`);\r\n                    return theBar?.node()?.getBoundingClientRect().width < 100\r\n                };\r\n                const getOutsideWidth = (d) => x(d.value)+15+(d.value.toFixed(0)).length*10;\r\n\r\n                const getLabelX = (d)=>that.changeLabelPosition && isTooSmall(d)?getOutsideWidth(d): x(d.value)-8;\r\n                const getLabelAnchor = (d)=>that.changeLabelPosition && isTooSmall(d)?'start':'end';\r\n\r\n\r\n\r\n                let x = d3.scaleLinear()\r\n                    .domain([0, d3.max(daySlice, d => d.value)])\r\n                    .range([margin.left, width-margin.right-65]);\r\n\r\n                let y = d3.scaleLinear()\r\n                    .domain([top_n, 0])\r\n                    .range([height-margin.bottom, margin.top]);\r\n\r\n                let xAxis = d3.axisTop()\r\n                    .scale(x)\r\n                    .ticks(width > 500 ? 5:2)\r\n                    .tickSize(-(height-margin.top-margin.bottom))\r\n                    .tickFormat(d => d3.format(',')(d));\r\n\r\n                svg.append('g')\r\n                    .attr('class', 'axis xAxis')\r\n                    .attr('transform', `translate(0, ${margin.top})`)\r\n                    .call(xAxis)\r\n                    .selectAll('.tick line')\r\n                    .classed('origin', d => d == 0);\r\n\r\n                svg.selectAll('rect.bar')\r\n                    .data(daySlice, d => d.name)\r\n                    .enter()\r\n                    .append('rect')\r\n                    .attr('class', d =>  `bar ${getClassName(d)}`)\r\n                    .attr('x', x(0)+1)\r\n                    .attr('width', d => (x(d.value)-x(0)-1)<0?0:(x(d.value)-x(0)-1))\r\n                    .attr('y', d => y(d.rank)+5)\r\n                    .attr('height', y(1)-y(0)-barPadding)\r\n                    .style('fill', d => d.colour);\r\n\r\n                svg.selectAll('text.label')\r\n                    .data(daySlice, d => d.name)\r\n                    .enter()\r\n                    .append('text')\r\n                    .attr('class', 'label')\r\n                    .attr('x', d => getLabelX(d))\r\n                    .attr('y', d => y(d.rank)+5+((y(1)-y(0))/2)+1)\r\n                    .style('text-anchor',d =>  getLabelAnchor(d))\r\n                    .style('color', 'white')\r\n                    .html(d => d.name);\r\n\r\n                svg.selectAll('text.valueLabel')\r\n                    .data(daySlice, d => d.name)\r\n                    .enter()\r\n                    .append('text')\r\n                    .attr('class', 'valueLabel')\r\n                    .attr('x', d => x(d.value)+5)\r\n                    .attr('y', d => y(d.rank)+5+((y(1)-y(0))/2)+1)\r\n                    .text(d => d3.format(',.0f')(d.lastValue));\r\n\r\n                let dayText = svg.append('text')\r\n                    .attr('class', 'dayText')\r\n                    .attr('x', width-margin.right)\r\n                    .attr('y', height-60)\r\n                    .style('text-anchor', 'end')\r\n                    .html(that.day);\r\n                    // .call(halo, 10);\r\n\r\n                let totalText = svg.append('text')\r\n                    .attr('class', 'totalText')\r\n                    .attr('x', width-margin.right)\r\n                    .attr('y', height-30)\r\n                    .style('text-anchor', 'end')\r\n                    .html(totalString + \" - 0\");\r\n\r\n                let total = 0;\r\n\r\n                let ticker = d3.interval(e => {\r\n                    if(!that.playing) return;\r\n                    that.resizeEventHandler();\r\n\r\n                    daySlice = data.filter(d => d.day == that.day && !isNaN(d.value))\r\n                        .sort((a,b) => b.value - a.value);\r\n\r\n                    total = daySlice.reduce((accumulator, currentValue) => accumulator + currentValue.value, 0);\r\n\r\n                    if(that.isRate){\r\n                        totalText.text(d => \"Data Average - \" + d3.format(',.2f')(total/daySlice.length)+\"%\");\r\n                    }else {\r\n                        totalText.text(d => totalString + \" - \" + d3.format(',.0f')(total));\r\n                    }\r\n\r\n                    daySlice = daySlice.slice(0,top_n);\r\n\r\n                    daySlice.forEach((d,i) => d.rank = i);\r\n\r\n                    // console.log('Intervalday: ', daySlice);\r\n\r\n                    x.domain([0, d3.max(daySlice, d => d.value)]);\r\n\r\n                    svg.select('.xAxis')\r\n                        .transition()\r\n                        .duration(tickDuration)\r\n                        .ease(d3.easeLinear)\r\n                        .call(xAxis);\r\n\r\n                    let bars = svg.selectAll('.bar').data(daySlice, d => d.name);\r\n\r\n                    bars\r\n                        .enter()\r\n                        .append('rect')\r\n                        .attr('class', d => `bar ${getClassName(d)}`)\r\n                        .attr('x', x(0)+1)\r\n                        .attr( 'width', d => (x(d.value)-x(0)-1)<0?0:(x(d.value)-x(0)-1))\r\n                        .attr('y', d => y(top_n+1)+5)\r\n                        .attr('height', y(1)-y(0)-barPadding)\r\n                        .style('fill', d => d.colour)\r\n                        .transition()\r\n                        .duration(tickDuration)\r\n                        .ease(d3.easeLinear)\r\n                        .attr('y', d => y(d.rank)+5);\r\n\r\n                    bars\r\n                        .transition()\r\n                        .duration(tickDuration)\r\n                        .ease(d3.easeLinear)\r\n                        .attr('width', d => (x(d.value)-x(0)-1)<0?0:(x(d.value)-x(0)-1))\r\n                        .attr('y', d => y(d.rank)+5);\r\n\r\n                    bars\r\n                        .exit()\r\n                        .transition()\r\n                        .duration(tickDuration)\r\n                        .ease(d3.easeLinear)\r\n                        .attr('width', d => (x(d.value)-x(0)-1)<0?0:(x(d.value)-x(0)-1))\r\n                        .attr('y', d => y(top_n+1)+5)\r\n                        .remove();\r\n\r\n                    let labels = svg.selectAll('.label')\r\n                        .data(daySlice, d => d.name);\r\n\r\n\r\n\r\n                    labels\r\n                        .enter()\r\n                        .append('text')\r\n                        .attr('class', 'label')\r\n                        .attr('x', d => getLabelX(d))\r\n                        .attr('y', d => y(top_n+1)+5+((y(1)-y(0))/2))\r\n                        .style('text-anchor',  d => getLabelAnchor(d))\r\n                        .style('color', 'white')\r\n                        .html(d => d.name)\r\n                        .transition()\r\n                        .duration(tickDuration)\r\n                        .ease(d3.easeLinear)\r\n                        .attr('y', d => y(d.rank)+5+((y(1)-y(0))/2)+1);\r\n\r\n\r\n                    labels\r\n                        .transition()\r\n                        .duration(tickDuration)\r\n                        .ease(d3.easeLinear)\r\n                        .attr('x', d => getLabelX(d))\r\n                        .style('text-anchor',  d => getLabelAnchor(d))\r\n                        .attr('y', d => y(d.rank)+5+((y(1)-y(0))/2)+1);\r\n\r\n                    labels\r\n                        .exit()\r\n                        .transition()\r\n                        .duration(tickDuration)\r\n                        .ease(d3.easeLinear)\r\n                        .attr('x', d => getLabelX(d))\r\n                        .style('text-anchor',  d => getLabelAnchor(d))\r\n                        .attr('y', d => y(top_n+1)+5)\r\n                        .remove();\r\n\r\n\r\n\r\n                    let valueLabels = svg.selectAll('.valueLabel').data(daySlice, d => d.name);\r\n\r\n                    valueLabels\r\n                        .enter()\r\n                        .append('text')\r\n                        .attr('class', 'valueLabel')\r\n                        .attr('x', d => x(d.value)+5)\r\n                        .attr('y', d => y(top_n+1)+5)\r\n                        .text(d => d3.format(',.0f')(d.lastValue))\r\n                        .transition()\r\n                        .duration(tickDuration)\r\n                        .ease(d3.easeLinear)\r\n                        .attr('y', d => y(d.rank)+5+((y(1)-y(0))/2)+1);\r\n\r\n                    valueLabels\r\n                        .transition()\r\n                        .duration(tickDuration)\r\n                        .ease(d3.easeLinear)\r\n                        .attr('x', d => x(d.value)+5)\r\n                        .attr('y', d => y(d.rank)+5+((y(1)-y(0))/2)+1)\r\n                        .tween(\"text\", function(d) {\r\n                            let i = d3.interpolateRound(d.lastValue, d.value);\r\n                            return function(t) {\r\n                                this.textContent = d3.format(',')(i(t));\r\n                            };\r\n                        });\r\n\r\n\r\n                    valueLabels\r\n                        .exit()\r\n                        .transition()\r\n                        .duration(tickDuration)\r\n                        .ease(d3.easeLinear)\r\n                        .attr('x', d => x(d.value)+5)\r\n                        .attr('y', d => y(top_n+1)+5)\r\n                        .remove();\r\n\r\n                    dayText.html(that.day);\r\n                    that.emitDateChange(that.day);\r\n\r\n                    let currentMoment = moment(that.day+' 2020', window.dateFormat + ' YYYY');\r\n                    let endMoment = moment(data[data.length-1].day+' 2020', window.dateFormat + ' YYYY');\r\n                    // day = d3.format('.1f')((+day) + 0.1);\r\n                    that.day = currentMoment.add(1, 'days').format(window.dateFormat);\r\n                    if(currentMoment.isAfter(endMoment)) that.day= data[0].day;\r\n                    // console.log(day)\r\n                    // console.log(day)\r\n                },tickDuration);\r\n\r\n            }\r\n            loadData(this.raceData);\r\n\r\n\r\n            // const halo = function(text, strokeWidth) {\r\n            //     text.select(function() { return this.parentNode.insertBefore(this.cloneNode(true), this); })\r\n            //         .style('fill', '#ffffff')\r\n            //         .style( 'stroke','#ffffff')\r\n            //         .style('stroke-width', strokeWidth)\r\n            //         .style('stroke-linejoin', 'round')\r\n            //         .style('opacity', 1);\r\n            //\r\n            // }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style>\r\n    .bar_race text{\r\n        font-size: 16px;\r\n        font-family: Open Sans, sans-serif;\r\n    }\r\n    .bar_race text.title{\r\n        font-size: 24px;\r\n        font-weight: 500;\r\n    }\r\n    .bar_race text.subTitle{\r\n        font-weight: 500;\r\n        fill: #777777;\r\n    }\r\n    .bar_race text.totalText{\r\n        font-size: 23px;\r\n        font-weight: bold;\r\n        fill: #3d3d3d;\r\n    }\r\n    .bar_race text.caption{\r\n        font-weight: 400;\r\n        font-size: 14px;\r\n        fill: #777777;\r\n    }\r\n    .bar_race text.label{\r\n        color: white !important;\r\n        font-weight: 600;\r\n    }\r\n\r\n    .bar_race text.valueLabel{\r\n        font-weight: 300;\r\n    }\r\n\r\n    .bar_race text.dayText{\r\n        font-size: 64px;\r\n        font-weight: 700;\r\n        opacity: 0.25;\r\n    }\r\n    dayText{\r\n        font-size: 80px !important;\r\n        font-weight: 700;\r\n        opacity: 0.25;\r\n    }\r\n    .tick text {\r\n        fill: #777777;\r\n    }\r\n    .xAxis .tick:nth-child(2) text {\r\n        text-anchor: start;\r\n    }\r\n    .tick line {\r\n        shape-rendering: CrispEdges;\r\n        stroke: #dddddd;\r\n    }\r\n    .tick line.origin{\r\n        stroke: #aaaaaa;\r\n    }\r\n    path.domain{\r\n        display: none;\r\n    }\r\n</style>"]}]}