{"remainingRequest":"C:\\Users\\allys\\Documents\\GIT\\Painel\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\allys\\Documents\\GIT\\Painel\\src\\components\\MiniAppPostOverlay.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\allys\\Documents\\GIT\\Painel\\src\\components\\MiniAppPostOverlay.vue","mtime":1590605624628},{"path":"C:\\Users\\allys\\Documents\\GIT\\Painel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\allys\\Documents\\GIT\\Painel\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\allys\\Documents\\GIT\\Painel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\allys\\Documents\\GIT\\Painel\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB3eCBmcm9tICd3ZWl4aW4tanMtc2RrJwppbXBvcnQgTW9yZUljb24gZnJvbSAnbWRpLXZ1ZS9DaGV2cm9uRG93bicKaW1wb3J0IExlc3NJY29uIGZyb20gJ21kaS12dWUvQ2hldnJvblVwJwpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAiTWluaUFwcFBvc3RPdmVybGF5IiwKICAgIGNvbXBvbmVudHM6ewogICAgICAgIE1vcmVJY29uLAogICAgICAgIExlc3NJY29uCiAgICB9LAogICAgZGF0YTogZnVuY3Rpb24oKXsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBwb3N0czogbnVsbCwKICAgICAgICAgICAgc2hvd01vcmU6IHRydWUKICAgICAgICB9CiAgICB9LAogICAgbW91bnRlZCgpIHsKICAgICAgICB3eC5taW5pUHJvZ3JhbS5nZXRFbnYoZnVuY3Rpb24ocmVzKSB7IGNvbnNvbGUubG9nKHJlcy5taW5pcHJvZ3JhbSkgfSkKICAgICAgICBmZXRjaCgiaHR0cHM6Ly91Y2xjc3NhLmNuL3Bvc3QvZ2V0UG9zdEVuZHBvaW50LnBocD9hdXRoPXVjbCZzcGFjZT0xMyIpLnRoZW4oYXN5bmMgcmVzPT57CiAgICAgICAgICAgIGxldCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTsKICAgICAgICAgICAgdGhpcy5wb3N0cyA9IGRhdGEucG9zdHM7CiAgICAgICAgfSkKICAgIH0sCiAgICBtZXRob2RzOnsKICAgICAgICBnb1RvQ29tbXVuaXR5KCl7CiAgICAgICAgICAgIHd4Lm1pbmlQcm9ncmFtLnN3aXRjaFRhYih7CiAgICAgICAgICAgICAgICB1cmw6Jy9wYWdlcy9kaXNjb3Zlci9kaXNjb3ZlcicKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHdpbmRvdy5nYSgnc2VuZCcsICdldmVudCcsICJtaW5pLWFwcCIsICJnby10by1jb21tdW5pdHkiLCAiIik7CiAgICAgICAgfSwKICAgICAgICBnb1RvUHVibGlzaCgpewogICAgICAgICAgICB3eC5taW5pUHJvZ3JhbS5uYXZpZ2F0ZVRvKHsKICAgICAgICAgICAgICAgIHVybDonL3BhZ2VzL3B1Ymxpc2gvcHVibGlzaD9zcGFjZV9pZD0xMycKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHdpbmRvdy5nYSgnc2VuZCcsICdldmVudCcsICJtaW5pLWFwcCIsICJnby10by1wdWJsaXNoIiwgIiIpOwogICAgICAgIH0sCiAgICAgICAgZ29Ub1Bvc3QoaWQpewogICAgICAgICAgICB3eC5taW5pUHJvZ3JhbS5uYXZpZ2F0ZVRvKHsKICAgICAgICAgICAgICAgIHVybDonL3BhZ2VzL21vbWVudHMvZGV0YWlsP2lkPScraWQKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHdpbmRvdy5nYSgnc2VuZCcsICdldmVudCcsICJtaW5pLWFwcCIsICJnby10by1wb3N0IiwgaWQpOwogICAgICAgIH0sCiAgICB9Cn0K"},{"version":3,"sources":["MiniAppPostOverlay.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAwBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MiniAppPostOverlay.vue","sourceRoot":"src/components","sourcesContent":["<!--This section is only used for our community app posts, you can ignore if not needed-->\r\n<template>\r\n    <div class=\"ma-overlay\" v-if=\"posts\">\r\n        <div class=\"title_bg\" :class=\"{'hidden-title': !showMore}\">\r\n            <div :style=\"{color: showMore?'black':'white'}\">❤️学联社区疫情互助讨论</div>\r\n            <div style=\"color: #007BFF\" @click=\"showMore = !showMore\"><MoreIcon v-if=\"showMore\"/><LessIcon v-else/>{{showMore?'隐藏':'打开'}}</div>\r\n        </div>\r\n        <div v-if=\"showMore\">\r\n            <div style=\"display: flex;overflow-y: scroll; margin:0;\">\r\n                <div class=\"post-block\" v-for=\"post of posts\" :key=\"post.id\" @click=\"goToPost(post.post_id)\">\r\n                    <div style=\"float: right; color: #007BFF\">查看详情</div>\r\n                    <div style=\"opacity:0.5\">{{post.user}}</div>\r\n                    <div style=\"max-height: 10vh; overflow: scroll;\">{{post.content}}</div>\r\n                </div>\r\n            </div>\r\n            <div style=\"display: flex; justify-content: space-around; padding: 10px; color:white;\">\r\n                <div @click=\"goToCommunity\">查看更多</div>\r\n                <div @click=\"goToPublish\">发布动态</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import wx from 'weixin-js-sdk'\r\n    import MoreIcon from 'mdi-vue/ChevronDown'\r\n    import LessIcon from 'mdi-vue/ChevronUp'\r\n    export default {\r\n        name: \"MiniAppPostOverlay\",\r\n        components:{\r\n            MoreIcon,\r\n            LessIcon\r\n        },\r\n        data: function(){\r\n            return {\r\n                posts: null,\r\n                showMore: true\r\n            }\r\n        },\r\n        mounted() {\r\n            wx.miniProgram.getEnv(function(res) { console.log(res.miniprogram) })\r\n            fetch(\"https://uclcssa.cn/post/getPostEndpoint.php?auth=ucl&space=13\").then(async res=>{\r\n                let data = await res.json();\r\n                this.posts = data.posts;\r\n            })\r\n        },\r\n        methods:{\r\n            goToCommunity(){\r\n                wx.miniProgram.switchTab({\r\n                    url:'/pages/discover/discover'\r\n                });\r\n                window.ga('send', 'event', \"mini-app\", \"go-to-community\", \"\");\r\n            },\r\n            goToPublish(){\r\n                wx.miniProgram.navigateTo({\r\n                    url:'/pages/publish/publish?space_id=13'\r\n                });\r\n                window.ga('send', 'event', \"mini-app\", \"go-to-publish\", \"\");\r\n            },\r\n            goToPost(id){\r\n                wx.miniProgram.navigateTo({\r\n                    url:'/pages/moments/detail?id='+id\r\n                });\r\n                window.ga('send', 'event', \"mini-app\", \"go-to-post\", id);\r\n            },\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .title_bg{\r\n        /*background: linear-gradient(rgba(0, 0, 0, 0) 0%, black 70%);*/\r\n        display:flex;\r\n        justify-content: space-between;\r\n        padding: 0 10px;\r\n        padding-top: 25px;\r\n        text-shadow: 0px 0px 2px white;\r\n    }\r\n\r\n    .hidden-title{\r\n        padding: 10px;\r\n        padding-top: 30px;\r\n    }\r\n\r\n    .ma-overlay{\r\n        background: linear-gradient(rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.5));\r\n        position: fixed;\r\n        left: 0;\r\n        bottom: 0;\r\n        width: 100%;\r\n        z-index: 100;\r\n\r\n    }\r\n\r\n    .post-block{\r\n        min-width: 230px;\r\n        height: 17vh;\r\n        background: white;\r\n        padding: 10px;\r\n        overflow: hidden;\r\n        margin: 10px;\r\n        box-shadow: 0px 5px 10px -2px rgba(0, 0, 0, 0.2);\r\n        border-radius: 10px;\r\n        font-size: 14px;\r\n        white-space: pre-wrap;\r\n        text-overflow: ellipsis;\r\n    }\r\n</style>"]}]}