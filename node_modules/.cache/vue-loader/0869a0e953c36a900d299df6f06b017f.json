{"remainingRequest":"C:\\Users\\allys\\Documents\\GIT\\Painel\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\allys\\Documents\\GIT\\Painel\\src\\components\\NearbyCasesFinder.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\allys\\Documents\\GIT\\Painel\\src\\components\\NearbyCasesFinder.vue","mtime":1590605624630},{"path":"C:\\Users\\allys\\Documents\\GIT\\Painel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\allys\\Documents\\GIT\\Painel\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\allys\\Documents\\GIT\\Painel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\allys\\Documents\\GIT\\Painel\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBMb2NhdGVJY29uIGZyb20gJ21kaS12dWUvTmVhck1lJwppbXBvcnQgU2hhcmVJY29ucyBmcm9tICIuL1NoYXJlSWNvbnMudnVlIjsKaW1wb3J0IHZTZWxlY3QgZnJvbSAndnVlLXNlbGVjdCcKY29uc3QgZ2V0R2V0T3JkaW5hbCA9IGZ1bmN0aW9uKG4pIHsKICAgIC8vcmVmIGh0dHBzOi8vY29tbXVuaXR5LnNob3BpZnkuY29tL2MvU2hvcGlmeS1EZXNpZ24vT3JkaW5hbC1OdW1iZXItaW4tamF2YXNjcmlwdC0xc3QtMm5kLTNyZC00dGgvdGQtcC83MjE1NgogICAgY29uc3Qgcz1bInRoIiwic3QiLCJuZCIsInJkIl0sCiAgICAgICAgdj1uJTEwMDsKICAgIHJldHVybiBuKyhzWyh2LTIwKSUxMF18fHNbdl18fHNbMF0pOwp9OwoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogIk5lYXJieUNhc2VzRmluZGVyIiwKICAgIHByb3BzOiBbInJlZ2lvbkRhdGEiLCAiY3VycmVudENvdW50cnkiXSwKICAgIGNvbXBvbmVudHM6ewogICAgICAgIExvY2F0ZUljb24sCiAgICAgICAgU2hhcmVJY29ucywKICAgICAgICB2U2VsZWN0CiAgICB9LAogICAgZGF0YTogZnVuY3Rpb24oKXsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBpbnB1dFZhbHVlOiAiIiwKICAgICAgICAgICAgZGlzcGxheUluZm86ICI8ZGl2IHN0eWxlPSdvcGFjaXR5OiAwLjc7IGZvbnQtc2l6ZTogMTRweDsnPiIgKyAodGhpcy5jdXJyZW50Q291bnRyeT09PSJVSyI/dGhpcy4kdCgnbmVhckJ5LnVrRGVmYXVsdCcpOnRoaXMuJHQoJ25lYXJCeS51c0RlZmF1bHQnKSkgKyI8L2Rpdj4iLAogICAgICAgICAgICBtYWluTG9jYXRpb246IG51bGwsCiAgICAgICAgICAgIHN0YXRlc0xvY2F0aW9uOiBudWxsLAogICAgICAgICAgICB1c0luZm86IHsKICAgICAgICAgICAgICAgIGNvdW50eTogbnVsbCwKICAgICAgICAgICAgICAgIHN0YXRlOiBudWxsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGlzUmVzdWx0OiBmYWxzZSwKICAgICAgICAgICAgdXNEcm9wZG93blZhbHVlOiBudWxsCiAgICAgICAgfQogICAgfSwKICAgIG1ldGhvZHM6ewogICAgICAgIGZpbmRVS1Bvc3Rjb2RlKCl7CiAgICAgICAgICAgIHRoaXMuaXNSZXN1bHQgPSBmYWxzZTsKICAgICAgICAgICAgd2luZG93LmdhKCdzZW5kJywgJ2V2ZW50JywgIm5lYXJieSIsICJwb3N0Y29kZSIsIHRoaXMuaW5wdXRWYWx1ZSk7CiAgICAgICAgICAgIGZldGNoKCJodHRwczovL2FwaS5wb3N0Y29kZXMuaW8vcG9zdGNvZGVzLyIrdGhpcy5pbnB1dFZhbHVlKS50aGVuKCBhc3luYyAocmVzKSA9PiB7CiAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTsKCiAgICAgICAgICAgICAgICBpZihkYXRhLnN0YXR1cyA9PSAyMDApewogICAgICAgICAgICAgICAgICAgIHRoaXMuZmluZEJ5VUtSZWdpb25OYW1lKGRhdGEucmVzdWx0Lm5oc19oYSwgZGF0YS5yZXN1bHQuYWRtaW5fZGlzdHJpY3QpCgogICAgICAgICAgICAgICAgfWVsc2UgewogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5nYSgnc2VuZCcsICdldmVudCcsICJuZWFyYnkiLCAidWstcG9zdGNvZGUtbm90Zm91bmQiLCB0aGlzLmlucHV0VmFsdWUpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheUluZm8gPSB0aGlzLiR0KCduZWFyQnkucG9zdGNvZGVFcnInKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgZmluZEJ5VUtSZWdpb25OYW1lKHJlZ2lvbk5hbWUsIGRpc3RyaWN0KXsKICAgICAgICAgICAgbGV0IHJlcyA9IHRoaXMucmVnaW9uRGF0YS5maWx0ZXIob2JqID0+IG9iai5sb2NhdGlvbiA9PSByZWdpb25OYW1lIHx8IG9iai5sb2NhdGlvbiA9PSBkaXN0cmljdCk7CiAgICAgICAgICAgIGlmKHJlcyAmJiByZXNbMF0pIHsKICAgICAgICAgICAgICAgIGxldCBsb2NhdGlvbiA9IHJlc1swXTsKICAgICAgICAgICAgICAgIGxldCBpbmRleCA9IHRoaXMucmVnaW9uRGF0YS5maW5kSW5kZXgob2JqPT4gb2JqLmlkID09PSBsb2NhdGlvbi5pZCk7CiAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlJbmZvID0gdGhpcy4kdCgnbmVhckJ5LnVrUmVzdWx0JywgW2xvY2F0aW9uLmxvY2F0aW9uLCBsb2NhdGlvbi5udW1iZXIsIGxvY2F0aW9uLmNoYW5nZSwgZ2V0R2V0T3JkaW5hbChpbmRleCldKQogICAgICAgICAgICAgICAgd2luZG93LmdhKCdzZW5kJywgJ2V2ZW50JywgIm5lYXJieSIsICJ1ay1yZWdpb24tZm91bmQiLCBsb2NhdGlvbi5sb2NhdGlvbisiLCAiK3JlZ2lvbk5hbWUgKyAiLCAiKyBkaXN0cmljdCk7CiAgICAgICAgICAgICAgICB0aGlzLmlzUmVzdWx0ID0gdHJ1ZTsKICAgICAgICAgICAgfWVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5SW5mbyA9IHRoaXMuJHQoJ25lYXJCeS5ub3RGb3VuZCcsIFtyZWdpb25OYW1lXSk7CiAgICAgICAgICAgICAgICB3aW5kb3cuZ2EoJ3NlbmQnLCAnZXZlbnQnLCAibmVhcmJ5IiwgInVrLXJlZ2lvbi1ub3Rmb3VuZCIsIHJlZ2lvbk5hbWUgKyAiLCAiKyBkaXN0cmljdCk7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGxvY2F0ZVVzZXJHUFMoKXsKICAgICAgICAgICAgdGhpcy5pc1Jlc3VsdCA9IGZhbHNlOwogICAgICAgICAgICB3aW5kb3cuZ2EoJ3NlbmQnLCAnZXZlbnQnLCAibmVhcmJ5IiwgInN0YXJ0LWxvY2F0aW5nIiwgIiIpOwogICAgICAgICAgICBpZiAobmF2aWdhdG9yLmdlb2xvY2F0aW9uKSB7CiAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlJbmZvID0gdGhpcy4kdCgnbmVhckJ5LmxvY2F0aW5nJyk7CiAgICAgICAgICAgICAgICBuYXZpZ2F0b3IuZ2VvbG9jYXRpb24uZ2V0Q3VycmVudFBvc2l0aW9uKGFzeW5jIChwb3NpdGlvbik9PnsKICAgICAgICAgICAgICAgICAgICB3aW5kb3cuZ2EoJ3NlbmQnLCAnZXZlbnQnLCAibmVhcmJ5IiwgImxvY2F0aW9uLWZvdW5kIiwgIiIpOwogICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuY3VycmVudENvdW50cnkgPT09ICJVSyIpewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldFVLUG9zdGNvZGVVc2luZ0xvY2F0aW9uKHBvc2l0aW9uKTsKICAgICAgICAgICAgICAgICAgICB9ZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZ2V0VVNMb2NhdGlvbkRhdGEoKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVEaXN0YW5jZUZyb21Mb2NhdGlvbihwb3NpdGlvbik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwoKT0+ewogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5nYSgnc2VuZCcsICdldmVudCcsICJuZWFyYnkiLCAibG9jYXRpb24tcmVqZWN0ZWQiLCAiIik7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5SW5mbyA9IHRoaXMuJHQoJ25lYXJCeS5yZWplY3RlZCcpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB3aW5kb3cuZ2EoJ3NlbmQnLCAnZXZlbnQnLCAibmVhcmJ5IiwgImxvY2F0aW9uLXVuc3VwcG9ydGVkIiwgIiIpOwogICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5SW5mbyA9IHRoaXMuJHQoJ25lYXJCeS51bnN1cHBvcnRlZCcpOwogICAgICAgICAgICB9CgogICAgICAgIH0sCiAgICAgICAgZ2V0VUtQb3N0Y29kZVVzaW5nTG9jYXRpb24ocG9zaXRpb24pewogICAgICAgICAgICBsZXQgcmVxdWVzdFVybCA9IGBodHRwczovL2FwaS5wb3N0Y29kZXMuaW8vcG9zdGNvZGVzP2xvbj0ke3Bvc2l0aW9uLmNvb3Jkcy5sb25naXR1ZGV9JmxhdD0ke3Bvc2l0aW9uLmNvb3Jkcy5sYXRpdHVkZX1gOwogICAgICAgICAgICBmZXRjaChyZXF1ZXN0VXJsKS50aGVuKCBhc3luYyByZXM9PnsKICAgICAgICAgICAgICAgIHdpbmRvdy5nYSgnc2VuZCcsICdldmVudCcsICJuZWFyYnkiLCAibG9jYXRpb24tZm91bmQiLCByZXF1ZXN0VXJsKTsKICAgICAgICAgICAgICAgIGxldCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTsKICAgICAgICAgICAgICAgIGlmKGRhdGEucmVzdWx0ICYmIGRhdGEucmVzdWx0WzBdKXsKICAgICAgICAgICAgICAgICAgICB0aGlzLmlucHV0VmFsdWUgPSBkYXRhLnJlc3VsdFswXS5wb3N0Y29kZTsKICAgICAgICAgICAgICAgICAgICB3aW5kb3cuZ2EoJ3NlbmQnLCAnZXZlbnQnLCAibmVhcmJ5IiwgInVrLXBvc3Rjb2RlLWZvdW5kIiwgdGhpcy5pbnB1dFZhbHVlICk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5maW5kVUtQb3N0Y29kZSgpCiAgICAgICAgICAgICAgICB9ZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgd2luZG93LmdhKCdzZW5kJywgJ2V2ZW50JywgIm5lYXJieSIsICJsb2NhdGlvbi1pbnZhbGlkIiwgcmVxdWVzdFVybCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5SW5mbyA9IHRoaXMuJHQoJ25lYXJCeS5ub3RVaycpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgYXN5bmMgZ2V0VVNMb2NhdGlvbkRhdGEoKXsKICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlID0+IHsKICAgICAgICAgICAgICAgIGlmKHRoaXMubWFpbkxvY2F0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh0aGlzLm1haW5Mb2NhdGlvbik7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZmV0Y2goYGh0dHBzOi8vaGVucnl6LmNjL3Byb2plY3RzL2NvdmlkL2FwaV9jdXJyZW50LnBocGApLnRoZW4oIGFzeW5jIHJlcz0+ewogICAgICAgICAgICAgICAgICAgIGxldCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBjc3Y9cmVxdWlyZSgnY3N2dG9qc29uJyk7CiAgICAgICAgICAgICAgICAgICAgbGV0IGpzb24gPSBhd2FpdCBjc3YoKS5mcm9tU3RyaW5nKGRhdGEuZ2xvYmFsKTsKICAgICAgICAgICAgICAgICAgICBsZXQgdXNTdGF0ZXMgPSBhd2FpdCBjc3YoKS5mcm9tU3RyaW5nKGRhdGEudXMpOwogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGpzb24sIHVzU3RhdGVzKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLm1haW5Mb2NhdGlvbiA9IGpzb24uZmlsdGVyKGVsZT0+ZWxlLkNvdW50cnlfUmVnaW9uPT09IlVTIik7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZXNMb2NhdGlvbiA9IHVzU3RhdGVzLnNvcnQoKGEsIGIpID0+IGIuQWN0aXZlIC0gYS5BY3RpdmUpOwogICAgICAgICAgICAgICAgICAgIHJlc29sdmUoanNvbik7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9KSkKICAgICAgICB9LAogICAgICAgIGNhbGN1bGF0ZURpc3RhbmNlRnJvbUxvY2F0aW9uKHBvc2l0aW9uKXsKICAgICAgICAgICAgY29uc3QgY2FsY3VsYXRlRGlzdCA9IChsYXQxLCBsb24xLCBsYXQyLCBsb24yKSA9PiB7CiAgICAgICAgICAgICAgICBsZXQgcCA9IDAuMDE3NDUzMjkyNTE5OTQzMjk1OyAgICAvLyBNYXRoLlBJIC8gMTgwCiAgICAgICAgICAgICAgICBsZXQgYyA9IE1hdGguY29zOwogICAgICAgICAgICAgICAgbGV0IGEgPSAwLjUgLSBjKChsYXQyIC0gbGF0MSkgKiBwKS8yICsKICAgICAgICAgICAgICAgICAgICBjKGxhdDEgKiBwKSAqIGMobGF0MiAqIHApICoKICAgICAgICAgICAgICAgICAgICAoMSAtIGMoKGxvbjIgLSBsb24xKSAqIHApKS8yOwoKICAgICAgICAgICAgICAgIHJldHVybiAxMjc0MiAqIE1hdGguYXNpbihNYXRoLnNxcnQoYSkpOyAvLyAyICogUjsgUiA9IDYzNzEga20KICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGNvbnN0IGdldENsb3Nlc3QgPSAoaW5wdXRMaXN0KT0+ewogICAgICAgICAgICAgICAgbGV0IGxpc3QgPSBpbnB1dExpc3Quc29ydCgoYSwgYikgPT4gYi5BY3RpdmUgLSBhLkFjdGl2ZSk7CiAgICAgICAgICAgICAgICBsZXQgbWluID0ge2Rpc3RhbmNlOiBJbmZpbml0eX07CiAgICAgICAgICAgICAgICBmb3IobGV0IHJlZ2lvbiBvZiBsaXN0KXsKICAgICAgICAgICAgICAgICAgICByZWdpb24uZGlzdGFuY2UgPSBjYWxjdWxhdGVEaXN0KHJlZ2lvblsiTGF0Il0scmVnaW9uWyJMb25nXyJdLHBvc2l0aW9uLmNvb3Jkcy5sYXRpdHVkZSwgcG9zaXRpb24uY29vcmRzLmxvbmdpdHVkZSk7CiAgICAgICAgICAgICAgICAgICAgaWYocmVnaW9uLmRpc3RhbmNlIDwgbWluLmRpc3RhbmNlKXsKICAgICAgICAgICAgICAgICAgICAgICAgbWluID0gcmVnaW9uOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIG1pbi5pZHggPSBsaXN0LmZpbmRJbmRleChlbGU9PmVsZT09PW1pbikgKyAxOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2cobGlzdCxtaW4pOwoKICAgICAgICAgICAgICAgIGlmKG1pbi5UZXN0aW5nX1JhdGUpewogICAgICAgICAgICAgICAgICAgIGxldCB0UmF0ZUxpc3QgPSBsaXN0LnNvcnQoKGEsIGIpID0+IGIuVGVzdGluZ19SYXRlIC0gYS5UZXN0aW5nX1JhdGUpOwogICAgICAgICAgICAgICAgICAgIG1pbi50UmF0ZVJhbmsgPSB0UmF0ZUxpc3QuZmluZEluZGV4KGVsZT0+ZWxlLlVJRD09PW1pbi5VSUQpICsgMTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBtaW47CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBsZXQgdXNDb3VudGllcyA9IHRoaXMubWFpbkxvY2F0aW9uOwogICAgICAgICAgICBsZXQgY21pbiA9IGdldENsb3Nlc3QodXNDb3VudGllcyk7IC8vIGNvdW50eSBtaW4KICAgICAgICAgICAgbGV0IHNtaW4gPSBnZXRDbG9zZXN0KHRoaXMuc3RhdGVzTG9jYXRpb24pOyAvLyBzdGF0ZSBtaW4KCiAgICAgICAgICAgIGlmKGNtaW4uZGlzdGFuY2U+IDUwMCl7CiAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlJbmZvID0gdGhpcy4kdCgnbmVhckJ5Lm5vdFVzJyk7CiAgICAgICAgICAgICAgICB3aW5kb3cuZ2EoJ3NlbmQnLCAnZXZlbnQnLCAibmVhcmJ5IiwgIm5vdC11cyIsIGNtaW4uQ29tYmluZWRfS2V5KyAiIC0gIiArY21pbi5kaXN0YW5jZSk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHdpbmRvdy5nYSgnc2VuZCcsICdldmVudCcsICJuZWFyYnkiLCAidXMtY291bnR5LWZvdW5kIiwgY21pbi5Db21iaW5lZF9LZXkpOwoKICAgICAgICAgICAgdGhpcy51c0Ryb3Bkb3duVmFsdWUgPSBjbWluLkNvbWJpbmVkX0tleTsKCiAgICAgICAgICAgIHRoaXMudXNJbmZvLmNvdW50eSA9IHRoaXMuJHQoJ25lYXJCeS51c1Jlc3VsdCcsCiAgICAgICAgICAgICAgICBbY21pbi5Db21iaW5lZF9LZXksIGNtaW4uQWN0aXZlLCBjbWluLkNvbmZpcm1lZCwgY21pbi5EZWF0aHMsIChjbWluLkRlYXRocy9jbWluLkNvbmZpcm1lZCoxMDApLnRvRml4ZWQoMiksCiAgICAgICAgICAgICAgICAgICAgY21pbi5SZWNvdmVyZWQhPTA/Y21pbi5SZWNvdmVyZWQ6Ii0iLCBjbWluLlJlY292ZXJlZCE9MD8oY21pbi5SZWNvdmVyZWQvY21pbi5Db25maXJtZWQqMTAwKS50b0ZpeGVkKDIpOiItIiwgZ2V0R2V0T3JkaW5hbChjbWluLmlkeCldKQogICAgICAgICAgICB0aGlzLnVzSW5mby5zdGF0ZSA9IHRoaXMuJHQoJ25lYXJCeS51c1N0YXRlUmVzdWx0JywKICAgICAgICAgICAgICAgIFtzbWluLlByb3ZpbmNlX1N0YXRlLCBzbWluLlBlb3BsZV9UZXN0ZWQsIChOdW1iZXIoc21pbi5UZXN0aW5nX1JhdGUpLzEwMDApLnRvRml4ZWQoMiksIHNtaW4uQ29uZmlybWVkLCBzbWluLlBlb3BsZV9Ib3NwaXRhbGl6ZWQ/c21pbi5QZW9wbGVfSG9zcGl0YWxpemVkOiItIiwKICAgICAgICAgICAgICAgICAgICBOdW1iZXIoc21pbi5Ib3NwaXRhbGl6YXRpb25fUmF0ZSkudG9GaXhlZCgyKSwgc21pbi5EZWF0aHMsIE51bWJlcihzbWluLk1vcnRhbGl0eV9SYXRlKS50b0ZpeGVkKDIpLCBzbWluLlJlY292ZXJlZD9zbWluLlJlY292ZXJlZDoiLSIsIE51bWJlcihzbWluLkFjdGl2ZSkudG9GaXhlZCgwKSwgZ2V0R2V0T3JkaW5hbChzbWluLmlkeCksCiAgICAgICAgICAgICAgICAgICAgZ2V0R2V0T3JkaW5hbChzbWluLnRSYXRlUmFuaykgXSkKCiAgICAgICAgICAgIHRoaXMuZGlzcGxheUluZm8gPSB0aGlzLnVzSW5mby5jb3VudHk7CiAgICAgICAgICAgIHRoaXMuaXNSZXN1bHQgPSB0cnVlOwogICAgICAgIH0sCiAgICAgICAgZmluZFVTQ291bnR5KGUpewogICAgICAgICAgICB3aW5kb3cuZ2EoJ3NlbmQnLCAnZXZlbnQnLCAibmVhcmJ5IiwgInVzLWNvdW50eS1kcm9wZG93biIsIGUuQ29tYmluZWRfS2V5KTsKICAgICAgICAgICAgdGhpcy51c0Ryb3Bkb3duVmFsdWUgPSBlOwogICAgICAgICAgICBsZXQgcG9zdGl0aW9uID0gewogICAgICAgICAgICAgICAgY29vcmRzOnsKICAgICAgICAgICAgICAgICAgICBsYXRpdHVkZTogZVsiTGF0Il0sCiAgICAgICAgICAgICAgICAgICAgbG9uZ2l0dWRlOiBlWyJMb25nXyJdCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRlRGlzdGFuY2VGcm9tTG9jYXRpb24ocG9zdGl0aW9uKTsKICAgICAgICB9LAogICAgICAgIHN3aXRjaFN0YXRlQ291bnR5KCl7CiAgICAgICAgICAgIHdpbmRvdy5nYSgnc2VuZCcsICdldmVudCcsICJuZWFyYnkiLCAidXMtY291bnR5LXN0YXRlLXN3aXRjaGVkIiwgJycpOwogICAgICAgICAgICBpZih0aGlzLmRpc3BsYXlJbmZvID09IHRoaXMudXNJbmZvLmNvdW50eSl7CiAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlJbmZvID0gdGhpcy51c0luZm8uc3RhdGU7CiAgICAgICAgICAgIH1lbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheUluZm8gPSB0aGlzLnVzSW5mby5jb3VudHk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9LAogICAgbW91bnRlZCgpIHsKICAgICAgICBpZih0aGlzLmN1cnJlbnRDb3VudHJ5ID09PSAiVVMiKQogICAgICAgICAgICB0aGlzLmdldFVTTG9jYXRpb25EYXRhKCkKICAgIH0KfQo="},{"version":3,"sources":["NearbyCasesFinder.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"NearbyCasesFinder.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div>\r\n        <div style=\"display: flex;align-items: center;margin-bottom: 20px; \">\r\n\r\n            <button type=\"button\" class=\"btn btn-secondary btn-lg circle\" @click=\"locateUserGPS\">\r\n                <div style=\"margin-top: -2px;\"><LocateIcon/></div>\r\n            </button>\r\n\r\n            <div  style=\"margin: 0 20px;width: 100%;\">\r\n                <input v-if=\"currentCountry==='UK'\" class=\"form-control\" id=\"postcode\" placeholder=\"UK Postcode\" v-model=\"inputValue\">\r\n                <vSelect v-else-if=\"mainLocation\" class=\"select\" :clearable=\"false\" :value=\"usDropdownValue\" :options=\"mainLocation\" label=\"Combined_Key\"\r\n                         @input=\"findUSCounty\" placeholder=\"Search...\"></vSelect>\r\n                <div v-else style=\"text-align: center\">Loading...</div>\r\n            </div>\r\n\r\n            <button type=\"submit\" class=\"btn btn-primary\" style=\"width: 100px;\" @click=\"findUKPostcode\">{{$t('nearBy.search')}}</button>\r\n\r\n        </div>\r\n        <div v-if=\"displayInfo===$t('nearBy.locating')\" style=\"margin: 5px;text-align: center;\">\r\n            <div class=\"spinner-border text-primary\" style=\"width: 2rem; height: 2rem;\" role=\"status\">\r\n                <span class=\"sr-only\">Loading...</span>\r\n            </div>\r\n        </div>\r\n        <div class=\"displayInfo\" style=\"text-align: center;\" v-html=\"displayInfo\"></div>\r\n\r\n        <div v-if=\"isResult\" style=\"text-align: center;margin-top: 20px; color: silver;\">\r\n            <a href=\"javascript: void(0)\" v-if=\"currentCountry==='US'\" @click=\"switchStateCounty\">{{$t('nearBy.switchCountyState')}}<br></a>\r\n            <a href=\"#regionData\">{{$t('nearBy.goToRegional')}}</a>\r\n            <div v-if=\"$i18n.locale !== 'zh'\">\r\n                <hr>\r\n                <ShareIcons style=\"margin-top: 20px;\" :title=\"displayInfo\"></ShareIcons>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n\r\n</template>\r\n\r\n<script>\r\n    import LocateIcon from 'mdi-vue/NearMe'\r\n    import ShareIcons from \"./ShareIcons.vue\";\r\n    import vSelect from 'vue-select'\r\n    const getGetOrdinal = function(n) {\r\n        //ref https://community.shopify.com/c/Shopify-Design/Ordinal-Number-in-javascript-1st-2nd-3rd-4th/td-p/72156\r\n        const s=[\"th\",\"st\",\"nd\",\"rd\"],\r\n            v=n%100;\r\n        return n+(s[(v-20)%10]||s[v]||s[0]);\r\n    };\r\n\r\n    export default {\r\n        name: \"NearbyCasesFinder\",\r\n        props: [\"regionData\", \"currentCountry\"],\r\n        components:{\r\n            LocateIcon,\r\n            ShareIcons,\r\n            vSelect\r\n        },\r\n        data: function(){\r\n            return {\r\n                inputValue: \"\",\r\n                displayInfo: \"<div style='opacity: 0.7; font-size: 14px;'>\" + (this.currentCountry===\"UK\"?this.$t('nearBy.ukDefault'):this.$t('nearBy.usDefault')) +\"</div>\",\r\n                mainLocation: null,\r\n                statesLocation: null,\r\n                usInfo: {\r\n                    county: null,\r\n                    state: null\r\n                },\r\n                isResult: false,\r\n                usDropdownValue: null\r\n            }\r\n        },\r\n        methods:{\r\n            findUKPostcode(){\r\n                this.isResult = false;\r\n                window.ga('send', 'event', \"nearby\", \"postcode\", this.inputValue);\r\n                fetch(\"https://api.postcodes.io/postcodes/\"+this.inputValue).then( async (res) => {\r\n                    let data = await res.json();\r\n                    console.log(data);\r\n\r\n                    if(data.status == 200){\r\n                        this.findByUKRegionName(data.result.nhs_ha, data.result.admin_district)\r\n\r\n                    }else {\r\n                        window.ga('send', 'event', \"nearby\", \"uk-postcode-notfound\", this.inputValue);\r\n                        this.displayInfo = this.$t('nearBy.postcodeErr')\r\n                    }\r\n                })\r\n            },\r\n            findByUKRegionName(regionName, district){\r\n                let res = this.regionData.filter(obj => obj.location == regionName || obj.location == district);\r\n                if(res && res[0]) {\r\n                    let location = res[0];\r\n                    let index = this.regionData.findIndex(obj=> obj.id === location.id);\r\n                    this.displayInfo = this.$t('nearBy.ukResult', [location.location, location.number, location.change, getGetOrdinal(index)])\r\n                    window.ga('send', 'event', \"nearby\", \"uk-region-found\", location.location+\", \"+regionName + \", \"+ district);\r\n                    this.isResult = true;\r\n                }else {\r\n                    this.displayInfo = this.$t('nearBy.notFound', [regionName]);\r\n                    window.ga('send', 'event', \"nearby\", \"uk-region-notfound\", regionName + \", \"+ district);\r\n                }\r\n            },\r\n            locateUserGPS(){\r\n                this.isResult = false;\r\n                window.ga('send', 'event', \"nearby\", \"start-locating\", \"\");\r\n                if (navigator.geolocation) {\r\n                    this.displayInfo = this.$t('nearBy.locating');\r\n                    navigator.geolocation.getCurrentPosition(async (position)=>{\r\n                        window.ga('send', 'event', \"nearby\", \"location-found\", \"\");\r\n                        if(this.currentCountry === \"UK\"){\r\n                            this.getUKPostcodeUsingLocation(position);\r\n                        }else {\r\n                            await this.getUSLocationData();\r\n                            this.calculateDistanceFromLocation(position);\r\n                        }\r\n                    },()=>{\r\n                        window.ga('send', 'event', \"nearby\", \"location-rejected\", \"\");\r\n                        this.displayInfo = this.$t('nearBy.rejected');\r\n                    });\r\n                } else {\r\n                    window.ga('send', 'event', \"nearby\", \"location-unsupported\", \"\");\r\n                    this.displayInfo = this.$t('nearBy.unsupported');\r\n                }\r\n\r\n            },\r\n            getUKPostcodeUsingLocation(position){\r\n                let requestUrl = `https://api.postcodes.io/postcodes?lon=${position.coords.longitude}&lat=${position.coords.latitude}`;\r\n                fetch(requestUrl).then( async res=>{\r\n                    window.ga('send', 'event', \"nearby\", \"location-found\", requestUrl);\r\n                    let data = await res.json();\r\n                    if(data.result && data.result[0]){\r\n                        this.inputValue = data.result[0].postcode;\r\n                        window.ga('send', 'event', \"nearby\", \"uk-postcode-found\", this.inputValue );\r\n                        this.findUKPostcode()\r\n                    }else {\r\n                        window.ga('send', 'event', \"nearby\", \"location-invalid\", requestUrl);\r\n                        this.displayInfo = this.$t('nearBy.notUk');\r\n                    }\r\n                })\r\n            },\r\n            async getUSLocationData(){\r\n                return new Promise((resolve => {\r\n                    if(this.mainLocation) {\r\n                        resolve(this.mainLocation);\r\n                        return;\r\n                    }\r\n                    fetch(`https://henryz.cc/projects/covid/api_current.php`).then( async res=>{\r\n                        let data = await res.json();\r\n                        const csv=require('csvtojson');\r\n                        let json = await csv().fromString(data.global);\r\n                        let usStates = await csv().fromString(data.us);\r\n                        console.log(json, usStates);\r\n                        this.mainLocation = json.filter(ele=>ele.Country_Region===\"US\");\r\n                        this.statesLocation = usStates.sort((a, b) => b.Active - a.Active);\r\n                        resolve(json);\r\n                    })\r\n                }))\r\n            },\r\n            calculateDistanceFromLocation(position){\r\n                const calculateDist = (lat1, lon1, lat2, lon2) => {\r\n                    let p = 0.017453292519943295;    // Math.PI / 180\r\n                    let c = Math.cos;\r\n                    let a = 0.5 - c((lat2 - lat1) * p)/2 +\r\n                        c(lat1 * p) * c(lat2 * p) *\r\n                        (1 - c((lon2 - lon1) * p))/2;\r\n\r\n                    return 12742 * Math.asin(Math.sqrt(a)); // 2 * R; R = 6371 km\r\n                };\r\n\r\n                const getClosest = (inputList)=>{\r\n                    let list = inputList.sort((a, b) => b.Active - a.Active);\r\n                    let min = {distance: Infinity};\r\n                    for(let region of list){\r\n                        region.distance = calculateDist(region[\"Lat\"],region[\"Long_\"],position.coords.latitude, position.coords.longitude);\r\n                        if(region.distance < min.distance){\r\n                            min = region;\r\n                        }\r\n                    }\r\n                    min.idx = list.findIndex(ele=>ele===min) + 1;\r\n                    console.log(list,min);\r\n\r\n                    if(min.Testing_Rate){\r\n                        let tRateList = list.sort((a, b) => b.Testing_Rate - a.Testing_Rate);\r\n                        min.tRateRank = tRateList.findIndex(ele=>ele.UID===min.UID) + 1;\r\n                    }\r\n                    return min;\r\n                };\r\n\r\n                let usCounties = this.mainLocation;\r\n                let cmin = getClosest(usCounties); // county min\r\n                let smin = getClosest(this.statesLocation); // state min\r\n\r\n                if(cmin.distance> 500){\r\n                    this.displayInfo = this.$t('nearBy.notUs');\r\n                    window.ga('send', 'event', \"nearby\", \"not-us\", cmin.Combined_Key+ \" - \" +cmin.distance);\r\n                    return;\r\n                }\r\n\r\n                window.ga('send', 'event', \"nearby\", \"us-county-found\", cmin.Combined_Key);\r\n\r\n                this.usDropdownValue = cmin.Combined_Key;\r\n\r\n                this.usInfo.county = this.$t('nearBy.usResult',\r\n                    [cmin.Combined_Key, cmin.Active, cmin.Confirmed, cmin.Deaths, (cmin.Deaths/cmin.Confirmed*100).toFixed(2),\r\n                        cmin.Recovered!=0?cmin.Recovered:\"-\", cmin.Recovered!=0?(cmin.Recovered/cmin.Confirmed*100).toFixed(2):\"-\", getGetOrdinal(cmin.idx)])\r\n                this.usInfo.state = this.$t('nearBy.usStateResult',\r\n                    [smin.Province_State, smin.People_Tested, (Number(smin.Testing_Rate)/1000).toFixed(2), smin.Confirmed, smin.People_Hospitalized?smin.People_Hospitalized:\"-\",\r\n                        Number(smin.Hospitalization_Rate).toFixed(2), smin.Deaths, Number(smin.Mortality_Rate).toFixed(2), smin.Recovered?smin.Recovered:\"-\", Number(smin.Active).toFixed(0), getGetOrdinal(smin.idx),\r\n                        getGetOrdinal(smin.tRateRank) ])\r\n\r\n                this.displayInfo = this.usInfo.county;\r\n                this.isResult = true;\r\n            },\r\n            findUSCounty(e){\r\n                window.ga('send', 'event', \"nearby\", \"us-county-dropdown\", e.Combined_Key);\r\n                this.usDropdownValue = e;\r\n                let postition = {\r\n                    coords:{\r\n                        latitude: e[\"Lat\"],\r\n                        longitude: e[\"Long_\"]\r\n                    }\r\n                };\r\n                this.calculateDistanceFromLocation(postition);\r\n            },\r\n            switchStateCounty(){\r\n                window.ga('send', 'event', \"nearby\", \"us-county-state-switched\", '');\r\n                if(this.displayInfo == this.usInfo.county){\r\n                    this.displayInfo = this.usInfo.state;\r\n                }else {\r\n                    this.displayInfo = this.usInfo.county;\r\n                }\r\n            }\r\n        },\r\n        mounted() {\r\n            if(this.currentCountry === \"US\")\r\n                this.getUSLocationData()\r\n        }\r\n    }\r\n</script>\r\n\r\n<style>\r\n    .displayInfo > span{\r\n        color: darkred;\r\n        padding: 0 5px;\r\n        font-weight: bolder;\r\n    }\r\n</style>"]}]}