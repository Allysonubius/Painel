{"remainingRequest":"C:\\Users\\allys\\Documents\\GIT\\Painel\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\allys\\Documents\\GIT\\Painel\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\allys\\Documents\\GIT\\Painel\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\allys\\Documents\\GIT\\Painel\\src\\components\\MapSection.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\allys\\Documents\\GIT\\Painel\\src\\components\\MapSection.vue","mtime":1590605624625},{"path":"C:\\Users\\allys\\Documents\\GIT\\Painel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\allys\\Documents\\GIT\\Painel\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\allys\\Documents\\GIT\\Painel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\allys\\Documents\\GIT\\Painel\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleCI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL2FsbHlzL0RvY3VtZW50cy9HSVQvUGFpbmVsL25vZGVfbW9kdWxlcy9AdnVlL2JhYmVsLXByZXNldC1hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgTWFwIGZyb20gIi4vTWFwLnZ1ZSI7CmltcG9ydCBEYXRhU3dpdGNoIGZyb20gJy4vRGF0YVN3aXRjaCc7CmltcG9ydCBDb3VudHJ5U3dpdGNoIGZyb20gJy4vQ291bnRyeVN3aXRjaCc7CmltcG9ydCB7IGNvbWJpbmVVS0hpZ2hDaGFydHMsIGNvbWJpbmVVU0hpZ2hDaGFydHMsIGNvbWJpbmVXb3JsZEhpZ2hDaGFydHMsIGdldFNtYWxsZXJEYXRlIH0gZnJvbSAiLi4vanMvbG9jYXRpb25VdGlscyI7CmltcG9ydCBTbGlkZUNvbnRyb2xsZXIgZnJvbSAnLi9TbGlkZUNvbnRyb2xsZXInOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIk1hcFNlY3Rpb24iLAogIGNvbXBvbmVudHM6IHsKICAgIFNsaWRlQ29udHJvbGxlcjogU2xpZGVDb250cm9sbGVyLAogICAgTWFwOiBNYXAsCiAgICBEYXRhU3dpdGNoOiBEYXRhU3dpdGNoLAogICAgQ291bnRyeVN3aXRjaDogQ291bnRyeVN3aXRjaAogIH0sCiAgcHJvcHM6IHsKICAgIHRhYmxlRGF0YTogT2JqZWN0LAogICAgY291bnRyeU5hbWU6IFN0cmluZywKICAgIG1haW5EYXRlOiBTdHJpbmcKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjdXJyZW50RGF0YTogbnVsbCwKICAgICAgdGFiOiAxLAogICAgICBsb2NhdGlvbnNEYXRhOiBudWxsLAogICAgICBpc1VrOiB0cnVlLAogICAgICBpc1VzOiBmYWxzZSwKICAgICAgaXNEYXRhQXZhaWxhYmxlOiB0cnVlLAogICAgICBkYXRlOiBudWxsLAogICAgICByZW5kZXJDb21wb25lbnQ6IHRydWUsCiAgICAgIGRhdGFUeXBlOiAiY29uZmlybWVkIgogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLmlzVWsgPSB0aGlzLmNvdW50cnlOYW1lID09PSAiVUsiOwogICAgdGhpcy5pc1VzID0gdGhpcy5jb3VudHJ5TmFtZSA9PT0gIlVTIjsKICAgIHRoaXMuY2hhbmdlVGFiKHRoaXMuaXNVayB8fCB0aGlzLmlzVXMgPyAxIDogMCk7CiAgfSwKICB3YXRjaDogewogICAgbWFpbkRhdGU6IGZ1bmN0aW9uIG1haW5EYXRlKCkgewogICAgICBpZiAodGhpcy5tYWluRGF0ZSkgewogICAgICAgIHZhciBkYXRlVG9DaGFuZ2UgPSBnZXRTbWFsbGVyRGF0ZSh0aGlzLm1haW5EYXRlLCB0aGlzLmN1cnJlbnREYXRhW3RoaXMuY3VycmVudERhdGEubGVuZ3RoIC0gMV0uZGF0ZSk7CiAgICAgICAgdGhpcy5jaGFuZ2VEYXRlKGRhdGVUb0NoYW5nZSk7CiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGNoYW5nZURhdGU6IGZ1bmN0aW9uIGNoYW5nZURhdGUoZGF0ZSkgewogICAgICB0aGlzLmRhdGUgPSBkYXRlOwogICAgICB0aGlzLmxvYWRNYXAoKTsKICAgIH0sCiAgICBjaGFuZ2VUYWI6IGZ1bmN0aW9uIGNoYW5nZVRhYih0YWIpIHsKICAgICAgdGhpcy50YWIgPSB0YWI7CgogICAgICBpZiAoKHRoaXMuaXNVayB8fCB0aGlzLmlzVXMpICYmIHRoaXMudGFiID09PSAxKSB7CiAgICAgICAgdGhpcy5jdXJyZW50RGF0YSA9IHRoaXMudGFibGVEYXRhLmNvdW50cnk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5jdXJyZW50RGF0YSA9IHRoaXMudGFibGVEYXRhLmdsb2JhbDsKICAgICAgfQoKICAgICAgdGhpcy5kYXRlID0gdGhpcy5jdXJyZW50RGF0YVt0aGlzLmN1cnJlbnREYXRhLmxlbmd0aCAtIDFdLmRhdGU7CiAgICAgIHRoaXMubG9hZE1hcCh0cnVlKTsKICAgIH0sCiAgICBjaGFuZ2VEYXRhVHlwZTogZnVuY3Rpb24gY2hhbmdlRGF0YVR5cGUodHlwZSkgewogICAgICB0aGlzLmRhdGFUeXBlID0gdHlwZTsKICAgICAgdGhpcy5sb2FkTWFwKCk7CiAgICB9LAogICAgbG9hZE1hcDogZnVuY3Rpb24gbG9hZE1hcChyZXJlbmRlcikgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgaWR4OwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlkeCA9IF90aGlzLmN1cnJlbnREYXRhLmZpbmRJbmRleChmdW5jdGlvbiAoZWxlKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBlbGUuZGF0ZSA9PT0gX3RoaXMuZGF0ZTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgX3RoaXMuaXNEYXRhQXZhaWxhYmxlID0gdHJ1ZTsKCiAgICAgICAgICAgICAgICBpZiAoX3RoaXMudGFiID09PSAxKSB7CiAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5pc1VrKSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMubG9jYXRpb25zRGF0YSA9IGNvbWJpbmVVS0hpZ2hDaGFydHMoX3RoaXMuY3VycmVudERhdGFbaWR4XS5hcnIpOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIF90aGlzLmlzRGF0YUF2YWlsYWJsZSA9ICEoX3RoaXMuaXNVcyAmJiAoX3RoaXMuZGF0YVR5cGUgPT09ICJjdXJlZCIgfHwgX3RoaXMuZGF0YVR5cGUgPT09ICJjUmF0ZSIpKTsKICAgICAgICAgICAgICAgICAgICBfdGhpcy5sb2NhdGlvbnNEYXRhID0gY29tYmluZVVTSGlnaENoYXJ0cyhfdGhpcy5jdXJyZW50RGF0YVtpZHhdLmFyciwgX3RoaXMuZGF0YVR5cGUpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBfdGhpcy5sb2NhdGlvbnNEYXRhID0gY29tYmluZVdvcmxkSGlnaENoYXJ0cyhfdGhpcy5jdXJyZW50RGF0YVtpZHhdLmFyciwgX3RoaXMuZGF0YVR5cGUpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChyZXJlbmRlcikgX3RoaXMuZm9yY2VSZXJlbmRlcigpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgZm9yY2VSZXJlbmRlcjogZnVuY3Rpb24gZm9yY2VSZXJlbmRlcigpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLnJlbmRlckNvbXBvbmVudCA9IGZhbHNlOwogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMyLnJlbmRlckNvbXBvbmVudCA9IHRydWU7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["MapSection.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div class=\"mBlock\">\r\n        <div class=\"switch-header\">\r\n            <DataSwitch :data-type=\"dataType\" @typeChange=\"changeDataType($event)\" :disabled=\"tab === 1 && isUk\"></DataSwitch>\r\n            <CountrySwitch v-if=\"isUk || isUs\" :tab=\"tab\" @changeTab=\"changeTab($event)\"></CountrySwitch>\r\n        </div>\r\n\r\n        <Map v-if=\"renderComponent && isDataAvailable\" :locationsData=\"locationsData\" :countryName=\"tab === 1 ? countryName : 'world'\" :is-rate=\"dataType.includes('Rate')\"></Map>\r\n\r\n        <div v-else style=\"padding: 30px;text-align: center;\">{{$t('noData')}}</div>\r\n\r\n        <div style=\"text-align: left;opacity: 0.3;\">*Data is incomplete, source: GOV.UK, isjeffcom and JHU.</div>\r\n\r\n        <SlideController v-if=\"date\" :start-date=\"currentData[0].date\" :end-date=\"currentData[currentData.length-1].date\"\r\n                         :hidePlayButton=\"true\" :current-date=\"date\" @change=\"changeDate\" :lazy=\"false\"\r\n                         :enableEvenIfPaused=\"true\" :playing=\"false\"></SlideController>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import Map from \"./Map.vue\";\r\n    import DataSwitch from './DataSwitch';\r\n    import CountrySwitch from './CountrySwitch';\r\n    import {\r\n        combineUKHighCharts,\r\n        combineUSHighCharts,\r\n        combineWorldHighCharts,\r\n        getSmallerDate\r\n    } from \"../js/locationUtils\"\r\n    import SlideController from './SlideController'\r\n    export default {\r\n        name: \"MapSection\",\r\n        components:{\r\n            SlideController,\r\n            Map,\r\n            DataSwitch,\r\n            CountrySwitch\r\n        },\r\n        props: {\r\n            tableData: Object,\r\n            countryName: String,\r\n            mainDate: String\r\n        },\r\n        data: function () {\r\n            return {\r\n                currentData: null,\r\n                tab: 1,\r\n                locationsData: null,\r\n                isUk: true,\r\n                isUs: false,\r\n                isDataAvailable: true,\r\n                date: null,\r\n                renderComponent: true,\r\n                dataType: \"confirmed\"\r\n            }\r\n        },\r\n        mounted() {\r\n            this.isUk = this.countryName===\"UK\";\r\n            this.isUs = this.countryName===\"US\";\r\n            this.changeTab(this.isUk || this.isUs ? 1 : 0);\r\n        },\r\n        watch: {\r\n            mainDate: function () {\r\n                if(this.mainDate) {\r\n                    let dateToChange = getSmallerDate(this.mainDate, this.currentData[this.currentData.length-1].date);\r\n                    this.changeDate(dateToChange)\r\n                }\r\n            }\r\n        },\r\n        methods: {\r\n            changeDate: function(date){\r\n                this.date = date;\r\n                this.loadMap()\r\n            },\r\n            changeTab(tab){\r\n                this.tab = tab;\r\n                if((this.isUk || this.isUs) && this.tab === 1){\r\n                    this.currentData = this.tableData.country;\r\n                }else {\r\n                    this.currentData = this.tableData.global;\r\n                }\r\n                this.date = this.currentData[this.currentData.length-1].date;\r\n                this.loadMap(true)\r\n            },\r\n            changeDataType(type){\r\n                this.dataType = type;\r\n                this.loadMap()\r\n            },\r\n            async loadMap(rerender){\r\n                 let idx = this.currentData.findIndex(ele=>ele.date === this.date);\r\n                this.isDataAvailable = true;\r\n                 if(this.tab === 1) {\r\n                     if(this.isUk) {\r\n                         this.locationsData = combineUKHighCharts(this.currentData[idx].arr);\r\n                     }else {\r\n                         this.isDataAvailable = !(this.isUs && (this.dataType === \"cured\" || this.dataType === \"cRate\"));\r\n                         this.locationsData = combineUSHighCharts(this.currentData[idx].arr, this.dataType);\r\n                     }\r\n                 }else{\r\n                     this.locationsData = combineWorldHighCharts(this.currentData[idx].arr, this.dataType);\r\n                 }\r\n                 if(rerender)\r\n                    this.forceRerender()\r\n              },\r\n              forceRerender() {\r\n                    this.renderComponent = false;\r\n                    this.$nextTick(() => {\r\n                        this.renderComponent = true;\r\n                    });\r\n               }\r\n\r\n        }\r\n    }\r\n</script>\r\n\r\n<style>\r\n\r\n</style>"],"sourceRoot":"src/components"}]}