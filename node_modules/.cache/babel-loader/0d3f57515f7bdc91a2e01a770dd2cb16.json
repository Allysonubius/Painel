{"remainingRequest":"C:\\Users\\allys\\Documents\\GIT\\Painel\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\allys\\Documents\\GIT\\Painel\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\allys\\Documents\\GIT\\Painel\\src\\js\\locationUtils.js","dependencies":[{"path":"C:\\Users\\allys\\Documents\\GIT\\Painel\\src\\js\\locationUtils.js","mtime":1590605624652},{"path":"C:\\Users\\allys\\Documents\\GIT\\Painel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\allys\\Documents\\GIT\\Painel\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\allys\\Documents\\GIT\\Painel\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmRleC1vZiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnJlZHVjZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5tYXAiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIuY29uc3RydWN0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZW50cmllcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnNldCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0iOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL2FsbHlzL0RvY3VtZW50cy9HSVQvUGFpbmVsL25vZGVfbW9kdWxlcy9AdnVlL2JhYmVsLXByZXNldC1hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX3NsaWNlZFRvQXJyYXkgZnJvbSAiQzovVXNlcnMvYWxseXMvRG9jdW1lbnRzL0dJVC9QYWluZWwvbm9kZV9tb2R1bGVzL0B2dWUvYmFiZWwtcHJlc2V0LWFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheSI7CmltcG9ydCBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciBmcm9tICJDOi9Vc2Vycy9hbGx5cy9Eb2N1bWVudHMvR0lUL1BhaW5lbC9ub2RlX21vZHVsZXMvQHZ1ZS9iYWJlbC1wcmVzZXQtYXBwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIjsKLy8gZmlsdGVyIGZvciBkMyBkYXRhLAovLyB3cml0dGVuIGJ5IEBoZW5yeXowMCBvbiBBcHIgMjAyMAppbXBvcnQgeyB3b3JsZG1hcERhdGEgfSBmcm9tICIuL3dvcmxkbWFwIjsKaW1wb3J0IHsgdWttYXBEYXRhIH0gZnJvbSAiLi91a21hcCI7CmltcG9ydCB7IHVzbWFwRGF0YSB9IGZyb20gIi4vdXNtYXAiOwoKdmFyIG1vbWVudCA9IHJlcXVpcmUoJ21vbWVudCcpOwoKZXhwb3J0IGZ1bmN0aW9uIHBhcnNlTG9jYXRpb25EYXRhKGFyZWFEYXRhKSB7CiAgaWYgKCFhcmVhRGF0YSkgcmV0dXJuIG51bGw7CiAgdmFyIGxvY2F0aW9uSlNPTiA9IEpTT04ucGFyc2UoYXJlYURhdGEucmVwbGFjZSgvXFwvZywgIiIpKTsKCiAgdmFyIGZpbHRlck51bWJlciA9IGZ1bmN0aW9uIGZpbHRlck51bWJlcihwbGFjZSkgewogICAgaWYgKHBsYWNlLm51bWJlciAhPSBudWxsKSB7CiAgICAgIGlmIChwbGFjZS5udW1iZXIudG9TdHJpbmcoKS5pbmNsdWRlcygnLCcpKSBwbGFjZS5udW1iZXIgPSBwbGFjZS5udW1iZXIucmVwbGFjZSgvLC9nLCAnJyk7CiAgICAgIHBsYWNlLmxvY2F0aW9uID0gcGxhY2UubG9jYXRpb24udHJpbSgpOwogICAgICBwbGFjZS5udW1iZXIgPSBwYXJzZUludChwbGFjZS5udW1iZXIudG9TdHJpbmcoKS50cmltKCkpOwogICAgfQogIH07CgogIGxvY2F0aW9uSlNPTi5mb3JFYWNoKGZpbHRlck51bWJlcik7CiAgcmV0dXJuIGxvY2F0aW9uSlNPTjsKfQpleHBvcnQgZnVuY3Rpb24gZ2V0RDNEYXRhKGRhaWx5TG9jYXRpb25Kc29uLCBkYXRhVHlwZUtleSkgewogIC8vIGRhaWx5TG9jYXRpb25Kc29uOiB7IGFycjogW3tsb2NhdGlvbjogU3RyaW5nLCBudW1iZXLvvJpJbnR9LC4uLl0sIGRhdGU6IFN0cmluZyh3aW5kb3cuZGF0ZUZvcm1hdCl9CiAgdmFyIGxvY2F0aW9uRGF0YSA9IFtdOwogIHZhciBsYXN0RGFpbHlEYXRhID0gbnVsbDsKCiAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGRhaWx5TG9jYXRpb25Kc29uKSwKICAgICAgX3N0ZXA7CgogIHRyeSB7CiAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykgewogICAgICB2YXIgZGFpbHlEYXRhID0gX3N0ZXAudmFsdWU7CiAgICAgIHZhciBkYWlseUxvY2F0aW9uRGF0YSA9IFtdOwogICAgICB2YXIgZGFpbHlTdW0gPSAwOwoKICAgICAgdmFyIF9pdGVyYXRvcjIgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihkYWlseURhdGEuYXJyKSwKICAgICAgICAgIF9zdGVwMjsKCiAgICAgIHRyeSB7CiAgICAgICAgdmFyIF9sb29wID0gZnVuY3Rpb24gX2xvb3AoKSB7CiAgICAgICAgICB2YXIgbG9jYXRpb24gPSBfc3RlcDIudmFsdWU7CiAgICAgICAgICB2YXIgb2JqID0ge307CiAgICAgICAgICBvYmoubmFtZSA9IGxvY2F0aW9uLmxvY2F0aW9uOwogICAgICAgICAgb2JqLnZhbHVlID0gIWxvY2F0aW9uW2RhdGFUeXBlS2V5XSB8fCBpc05hTihsb2NhdGlvbltkYXRhVHlwZUtleV0pID8gMCA6IGxvY2F0aW9uW2RhdGFUeXBlS2V5XTsKICAgICAgICAgIG9iai5kYXkgPSBkYWlseURhdGEuZGF0ZTsKICAgICAgICAgIG9iai5sYXN0VmFsdWUgPSAwOwogICAgICAgICAgZGFpbHlTdW0gKz0gb2JqLnZhbHVlOwoKICAgICAgICAgIGlmIChsYXN0RGFpbHlEYXRhKSB7CiAgICAgICAgICAgIHZhciBsYXN0TG9jYXRpb25EYXRhID0gbGFzdERhaWx5RGF0YS5hcnIuZmluZChmdW5jdGlvbiAob2JqKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG9iai5sb2NhdGlvbiA9PT0gbG9jYXRpb24ubG9jYXRpb247CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBvYmoubGFzdFZhbHVlID0gbGFzdExvY2F0aW9uRGF0YSAmJiBsYXN0TG9jYXRpb25EYXRhW2RhdGFUeXBlS2V5XSA/IGxhc3RMb2NhdGlvbkRhdGFbZGF0YVR5cGVLZXldIDogMDsKICAgICAgICAgIH0KCiAgICAgICAgICBkYWlseUxvY2F0aW9uRGF0YS5wdXNoKG9iaik7CiAgICAgICAgfTsKCiAgICAgICAgZm9yIChfaXRlcmF0b3IyLnMoKTsgIShfc3RlcDIgPSBfaXRlcmF0b3IyLm4oKSkuZG9uZTspIHsKICAgICAgICAgIF9sb29wKCk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3IyLmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3IyLmYoKTsKICAgICAgfQoKICAgICAgbGFzdERhaWx5RGF0YSA9IGRhaWx5RGF0YTsKICAgICAgaWYgKGRhaWx5U3VtID4gMCkgbG9jYXRpb25EYXRhID0gbG9jYXRpb25EYXRhLmNvbmNhdChkYWlseUxvY2F0aW9uRGF0YSk7CiAgICB9IC8vIGNvbnNvbGUubG9nKGxvY2F0aW9uRGF0YSkKCiAgfSBjYXRjaCAoZXJyKSB7CiAgICBfaXRlcmF0b3IuZShlcnIpOwogIH0gZmluYWxseSB7CiAgICBfaXRlcmF0b3IuZigpOwogIH0KCiAgcmV0dXJuIGxvY2F0aW9uRGF0YTsKfQpleHBvcnQgZnVuY3Rpb24gZ2V0UmVnaW9uSGlzdG9yeVRhYmxlRGF0YShhbGxIaXN0b3J5LCB0b2RheUFycikgewogIHZhciBkYWlseUxvY2F0aW9uSnNvbiA9IFtdOwoKICB2YXIgX2l0ZXJhdG9yMyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGFsbEhpc3RvcnkpLAogICAgICBfc3RlcDM7CgogIHRyeSB7CiAgICBmb3IgKF9pdGVyYXRvcjMucygpOyAhKF9zdGVwMyA9IF9pdGVyYXRvcjMubigpKS5kb25lOykgewogICAgICB2YXIgaGlzdG9yeSA9IF9zdGVwMy52YWx1ZTsKCiAgICAgIGlmIChoaXN0b3J5LmFyZWEpIHsKICAgICAgICB2YXIgZGF0YSA9IHt9OwogICAgICAgIGRhdGEuYXJyID0gcGFyc2VMb2NhdGlvbkRhdGEoaGlzdG9yeS5hcmVhKTsKICAgICAgICBkYXRhLmRhdGUgPSBtb21lbnQoaGlzdG9yeS5kYXRlKS5mb3JtYXQod2luZG93LmRhdGVGb3JtYXQpOwogICAgICAgIGRhaWx5TG9jYXRpb25Kc29uLnB1c2goZGF0YSk7CiAgICAgIH0KICAgIH0gLy8gYWRkIGN1cnJlbnQgZGF0YQoKICB9IGNhdGNoIChlcnIpIHsKICAgIF9pdGVyYXRvcjMuZShlcnIpOwogIH0gZmluYWxseSB7CiAgICBfaXRlcmF0b3IzLmYoKTsKICB9CgogIHZhciB0b2RheURhdGUgPSBtb21lbnQoKS5mb3JtYXQod2luZG93LmRhdGVGb3JtYXQpOwoKICBpZiAoZGFpbHlMb2NhdGlvbkpzb25bZGFpbHlMb2NhdGlvbkpzb24ubGVuZ3RoIC0gMV0uZGF0ZSAhPSB0b2RheURhdGUpIHsKICAgIHZhciB0b2RheSA9IHsKICAgICAgYXJyOiB0b2RheUFyciwKICAgICAgZGF0ZTogdG9kYXlEYXRlCiAgICB9OwogICAgZGFpbHlMb2NhdGlvbkpzb24ucHVzaCh0b2RheSk7CiAgfSAvLyBjb25zb2xlLmxvZygidWsgZGFpbHkgbG9jYXRpb24ganNvbiIsIGRhaWx5TG9jYXRpb25Kc29uKTsKCgogIHJldHVybiBkYWlseUxvY2F0aW9uSnNvbjsKfQoKZnVuY3Rpb24gY29tYmluZUFsbENvdW50cnlEYXRhKGdsb2JhbERhdGEsIGNvbWJpbmVQcm92aW5jZSkgewogIHZhciBmaWx0ZXJlZExvY2F0aW9ucyA9IFtdOwogIHZhciBhZGRlZENvdW50cnlDb2RlcyA9IHt9OwoKICB2YXIgX2l0ZXJhdG9yNCA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGdsb2JhbERhdGEuY29uZmlybWVkLmxvY2F0aW9ucyksCiAgICAgIF9zdGVwNDsKCiAgdHJ5IHsKICAgIHZhciBfbG9vcDIgPSBmdW5jdGlvbiBfbG9vcDIoKSB7CiAgICAgIHZhciBfZ2xvYmFsRGF0YSRkZWF0aHMkbG8sIF9nbG9iYWxEYXRhJHJlY292ZXJlZDsKCiAgICAgIHZhciByZWdpb24gPSBfc3RlcDQudmFsdWU7CiAgICAgIHZhciBjb25maXJtZWRBcnIgPSBPYmplY3QuZW50cmllcyhyZWdpb24uaGlzdG9yeSk7CgogICAgICB2YXIgcXVlcnkgPSBmdW5jdGlvbiBxdWVyeShlbGUpIHsKICAgICAgICByZXR1cm4gZWxlLmNvdW50cnkgPT09IHJlZ2lvbi5jb3VudHJ5ICYmIGVsZS5wcm92aW5jZSA9PT0gcmVnaW9uLnByb3ZpbmNlOwogICAgICB9OwoKICAgICAgdmFyIGRlYXRoQXJyID0gKF9nbG9iYWxEYXRhJGRlYXRocyRsbyA9IGdsb2JhbERhdGEuZGVhdGhzLmxvY2F0aW9ucy5maW5kKHF1ZXJ5KSkgPT09IG51bGwgfHwgX2dsb2JhbERhdGEkZGVhdGhzJGxvID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZ2xvYmFsRGF0YSRkZWF0aHMkbG8uaGlzdG9yeTsKICAgICAgdmFyIGN1cmVkQXJyID0gKF9nbG9iYWxEYXRhJHJlY292ZXJlZCA9IGdsb2JhbERhdGEucmVjb3ZlcmVkLmxvY2F0aW9ucy5maW5kKHF1ZXJ5KSkgPT09IG51bGwgfHwgX2dsb2JhbERhdGEkcmVjb3ZlcmVkID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZ2xvYmFsRGF0YSRyZWNvdmVyZWQuaGlzdG9yeTsKCiAgICAgIGlmIChjb21iaW5lUHJvdmluY2UgJiYgYWRkZWRDb3VudHJ5Q29kZXNbcmVnaW9uLmNvdW50cnlfY29kZV0pIHsKICAgICAgICB2YXIgbWFpbiA9IGZpbHRlcmVkTG9jYXRpb25zW2ZpbHRlcmVkTG9jYXRpb25zLmxlbmd0aCAtIDFdOwoKICAgICAgICB2YXIgX2l0ZXJhdG9yNSA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGNvbmZpcm1lZEFyciksCiAgICAgICAgICAgIF9zdGVwNTsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgIGZvciAoX2l0ZXJhdG9yNS5zKCk7ICEoX3N0ZXA1ID0gX2l0ZXJhdG9yNS5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgIHZhciBfc3RlcDUkdmFsdWUgPSBfc2xpY2VkVG9BcnJheShfc3RlcDUudmFsdWUsIDIpLAogICAgICAgICAgICAgICAga2V5ID0gX3N0ZXA1JHZhbHVlWzBdLAogICAgICAgICAgICAgICAgdmFsdWUgPSBfc3RlcDUkdmFsdWVbMV07CgogICAgICAgICAgICBtYWluLmNvbmZpcm1lZFtrZXldID0gbWFpbi5jb25maXJtZWRba2V5XSArIHZhbHVlOwogICAgICAgICAgICBtYWluLmRlYXRoW2tleV0gPSBtYWluLmRlYXRoW2tleV0gKyBkZWF0aEFycltrZXldOwogICAgICAgICAgICBtYWluLmN1cmVkW2tleV0gPSBtYWluLmN1cmVkW2tleV0gKyAoY3VyZWRBcnIgPyBjdXJlZEFycltrZXldIDogMCk7CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICBfaXRlcmF0b3I1LmUoZXJyKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgX2l0ZXJhdG9yNS5mKCk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGFkZGVkQ291bnRyeUNvZGVzW3JlZ2lvbi5jb3VudHJ5X2NvZGVdID0gdHJ1ZTsKICAgICAgICB2YXIgX21haW4gPSB7CiAgICAgICAgICBjb3VudHJ5OiByZWdpb24uY291bnRyeSwKICAgICAgICAgIGNvdW50cnlfY29kZTogcmVnaW9uLmNvdW50cnlfY29kZSwKICAgICAgICAgIGNvbmZpcm1lZDoge30sCiAgICAgICAgICBkZWF0aDoge30sCiAgICAgICAgICBjdXJlZDoge30KICAgICAgICB9OwogICAgICAgIGlmICghY29tYmluZVByb3ZpbmNlKSBfbWFpbi5wcm92aW5jZSA9IHJlZ2lvbi5wcm92aW5jZTsKCiAgICAgICAgdmFyIF9pdGVyYXRvcjYgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihjb25maXJtZWRBcnIpLAogICAgICAgICAgICBfc3RlcDY7CgogICAgICAgIHRyeSB7CiAgICAgICAgICBmb3IgKF9pdGVyYXRvcjYucygpOyAhKF9zdGVwNiA9IF9pdGVyYXRvcjYubigpKS5kb25lOykgewogICAgICAgICAgICB2YXIgX3N0ZXA2JHZhbHVlID0gX3NsaWNlZFRvQXJyYXkoX3N0ZXA2LnZhbHVlLCAyKSwKICAgICAgICAgICAgICAgIF9rZXkgPSBfc3RlcDYkdmFsdWVbMF0sCiAgICAgICAgICAgICAgICBfdmFsdWUgPSBfc3RlcDYkdmFsdWVbMV07CgogICAgICAgICAgICBfbWFpbi5jb25maXJtZWRbX2tleV0gPSBfdmFsdWU7CiAgICAgICAgICAgIF9tYWluLmRlYXRoW19rZXldID0gZGVhdGhBcnJbX2tleV07CiAgICAgICAgICAgIF9tYWluLmN1cmVkW19rZXldID0gY3VyZWRBcnIgPyBjdXJlZEFycltfa2V5XSA6IDA7CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICBfaXRlcmF0b3I2LmUoZXJyKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgX2l0ZXJhdG9yNi5mKCk7CiAgICAgICAgfQoKICAgICAgICBmaWx0ZXJlZExvY2F0aW9ucy5wdXNoKF9tYWluKTsKICAgICAgfQogICAgfTsKCiAgICBmb3IgKF9pdGVyYXRvcjQucygpOyAhKF9zdGVwNCA9IF9pdGVyYXRvcjQubigpKS5kb25lOykgewogICAgICBfbG9vcDIoKTsKICAgIH0KICB9IGNhdGNoIChlcnIpIHsKICAgIF9pdGVyYXRvcjQuZShlcnIpOwogIH0gZmluYWxseSB7CiAgICBfaXRlcmF0b3I0LmYoKTsKICB9CgogIGNvbnNvbGUubG9nKCJjb21iaW5lZCByZXN1bHRzIiwgZmlsdGVyZWRMb2NhdGlvbnMpOwogIHJldHVybiBmaWx0ZXJlZExvY2F0aW9uczsKfQoKZXhwb3J0IGZ1bmN0aW9uIGdldEdsb2JhbEhpc3RvcnlUYWJsZURhdGEoZ2xvYmFsRGF0YSwgaGlkZUNvdW50cnlOYW1lLCBjb21iaW5lUHJvdmluY2UpIHsKICB2YXIgbG9jYXRpb25zID0gY29tYmluZUFsbENvdW50cnlEYXRhKGdsb2JhbERhdGEsIGNvbWJpbmVQcm92aW5jZSk7CiAgdmFyIGRhdGVNYXAgPSB7fTsKCiAgdmFyIF9pdGVyYXRvcjcgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihsb2NhdGlvbnMpLAogICAgICBfc3RlcDc7CgogIHRyeSB7CiAgICBmb3IgKF9pdGVyYXRvcjcucygpOyAhKF9zdGVwNyA9IF9pdGVyYXRvcjcubigpKS5kb25lOykgewogICAgICB2YXIgZGF5RGF0YSA9IF9zdGVwNy52YWx1ZTsKICAgICAgdmFyIGNvbmZpcm1lZEFyciA9IE9iamVjdC5lbnRyaWVzKGRheURhdGEuY29uZmlybWVkKTsKCiAgICAgIGZvciAodmFyIF9pMiA9IDAsIF9jb25maXJtZWRBcnIgPSBjb25maXJtZWRBcnI7IF9pMiA8IF9jb25maXJtZWRBcnIubGVuZ3RoOyBfaTIrKykgewogICAgICAgIHZhciBfY29uZmlybWVkQXJyJF9pID0gX3NsaWNlZFRvQXJyYXkoX2NvbmZpcm1lZEFycltfaTJdLCAyKSwKICAgICAgICAgICAga2V5ID0gX2NvbmZpcm1lZEFyciRfaVswXSwKICAgICAgICAgICAgdmFsdWUgPSBfY29uZmlybWVkQXJyJF9pWzFdOwoKICAgICAgICB2YXIgZGF0ZSA9IG1vbWVudChrZXkpLmZvcm1hdCh3aW5kb3cuZGF0ZUZvcm1hdCk7CiAgICAgICAgdmFyIG5hbWUgPSBoaWRlQ291bnRyeU5hbWUgJiYgZGF5RGF0YVsicHJvdmluY2UiXSA/IGRheURhdGFbInByb3ZpbmNlIl0gOiBkYXlEYXRhWyJjb3VudHJ5Il0gKyAoZGF5RGF0YVsicHJvdmluY2UiXSA/ICIgLSAiICsgZGF5RGF0YVsicHJvdmluY2UiXSA6ICIiKTsKICAgICAgICB2YXIgbG9jYXRpb24gPSBjb21iaW5lUHJvdmluY2UgPyB7CiAgICAgICAgICBsb2NhdGlvbjogbmFtZSwKICAgICAgICAgIGNvdW50cnlfY29kZTogZGF5RGF0YVsiY291bnRyeV9jb2RlIl0sCiAgICAgICAgICBjb3VudHJ5OiBkYXlEYXRhWyJjb3VudHJ5Il0KICAgICAgICB9IDogewogICAgICAgICAgbG9jYXRpb246IG5hbWUKICAgICAgICB9OwogICAgICAgIGxvY2F0aW9uLmNvbmZpcm1lZCA9IHZhbHVlOwogICAgICAgIGxvY2F0aW9uLmRlYXRoID0gZGF5RGF0YS5kZWF0aFtrZXldOwogICAgICAgIGxvY2F0aW9uLmN1cmVkID0gZGF5RGF0YS5jdXJlZFtrZXldOwogICAgICAgIGxvY2F0aW9uLmFjdGl2ZSA9IGxvY2F0aW9uLmNvbmZpcm1lZCAtIGxvY2F0aW9uLmN1cmVkIC0gbG9jYXRpb24uZGVhdGg7CiAgICAgICAgbG9jYXRpb24uZFJhdGUgPSBsb2NhdGlvbi5jb25maXJtZWQgPiAwID8gbG9jYXRpb24uZGVhdGggLyBsb2NhdGlvbi5jb25maXJtZWQgKiAxMDAgOiAwOwogICAgICAgIGxvY2F0aW9uLmNSYXRlID0gbG9jYXRpb24uY29uZmlybWVkID4gMCA/IGxvY2F0aW9uLmN1cmVkIC8gbG9jYXRpb24uY29uZmlybWVkICogMTAwIDogMDsKICAgICAgICBkYXRlTWFwW2RhdGVdID0gZGF0ZU1hcFtkYXRlXSA/IGRhdGVNYXBbZGF0ZV0gOiBbXTsKICAgICAgICBkYXRlTWFwW2RhdGVdLnB1c2gobG9jYXRpb24pOwogICAgICB9CiAgICB9IC8vIGNvbnNvbGUubG9nKGRhdGVNYXApOwoKICB9IGNhdGNoIChlcnIpIHsKICAgIF9pdGVyYXRvcjcuZShlcnIpOwogIH0gZmluYWxseSB7CiAgICBfaXRlcmF0b3I3LmYoKTsKICB9CgogIHZhciBkYWlseUxvY2F0aW9uSnNvbiA9IFtdOwogIHZhciBjaGVja0FsbFplcm8gPSB0cnVlOwoKICB2YXIgYWxsWmVyb0NoZWNrZXIgPSBmdW5jdGlvbiBhbGxaZXJvQ2hlY2tlcih0b3RhbCwgbnVtKSB7CiAgICByZXR1cm4gdG90YWwgKyBudW0uY29uZmlybWVkOwogIH07CgogIGZvciAodmFyIF9pID0gMCwgX09iamVjdCRlbnRyaWVzID0gT2JqZWN0LmVudHJpZXMoZGF0ZU1hcCk7IF9pIDwgX09iamVjdCRlbnRyaWVzLmxlbmd0aDsgX2krKykgewogICAgdmFyIGVudHJ5ID0gX09iamVjdCRlbnRyaWVzW19pXTsKCiAgICBpZiAoY2hlY2tBbGxaZXJvKSB7CiAgICAgIGlmIChlbnRyeVsxXS5yZWR1Y2UoYWxsWmVyb0NoZWNrZXIsIDApID09PSAwKSB7CiAgICAgICAgY29udGludWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY2hlY2tBbGxaZXJvID0gZmFsc2U7CiAgICAgIH0KICAgIH0KCiAgICBkYWlseUxvY2F0aW9uSnNvbi5wdXNoKHsKICAgICAgYXJyOiBlbnRyeVsxXSwKICAgICAgZGF0ZTogZW50cnlbMF0KICAgIH0pOwogIH0gLy8gY29uc29sZS5sb2coImdsb2JhbCBkYWlseSBsb2NhdGlvbiBqc29uIiwgZGFpbHlMb2NhdGlvbkpzb24pOwoKCiAgcmV0dXJuIGRhaWx5TG9jYXRpb25Kc29uOwp9CmV4cG9ydCBmdW5jdGlvbiBnZXRBbGxDb3VudHJpZXMobG9jYXRpb25zKSB7CiAgdmFyIGFyciA9IGxvY2F0aW9ucy5tYXAoZnVuY3Rpb24gKGUpIHsKICAgIHJldHVybiBlLmNvdW50cnk7CiAgfSk7CiAgcmV0dXJuIG5ldyBTZXQoYXJyKTsgLy9yZWYgaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvOTIyOTY0NS9yZW1vdmUtZHVwbGljYXRlLXZhbHVlcy1mcm9tLWpzLWFycmF5Cn0KZXhwb3J0IGZ1bmN0aW9uIGdldENvdW50cnlEYXRhKGdsb2JhbERhdGEsIGNvdW50cnlOYW1lKSB7CiAgLy8gY29uc29sZS5sb2coZ2xvYmFsRGF0YSk7CiAgdmFyIGNvdW50cnlEYXRhID0gewogICAgY29uZmlybWVkOiB7fSwKICAgIGRlYXRoczoge30sCiAgICByZWNvdmVyZWQ6IHt9LAogICAgbGF0ZXN0OiB7fQogIH07CiAgdmFyIGNvdW50cnlGaWx0ZXIgPSBjb3VudHJ5TmFtZSA9PSAid29ybGQiID8gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHRydWU7CiAgfSA6IGZ1bmN0aW9uIChlKSB7CiAgICByZXR1cm4gZS5jb3VudHJ5ID09IGNvdW50cnlOYW1lOwogIH07CiAgY291bnRyeURhdGEuY29uZmlybWVkLmxvY2F0aW9ucyA9IGdsb2JhbERhdGEuY29uZmlybWVkLmxvY2F0aW9ucy5maWx0ZXIoY291bnRyeUZpbHRlcik7CiAgY291bnRyeURhdGEuZGVhdGhzLmxvY2F0aW9ucyA9IGdsb2JhbERhdGEuZGVhdGhzLmxvY2F0aW9ucy5maWx0ZXIoY291bnRyeUZpbHRlcik7CiAgY291bnRyeURhdGEucmVjb3ZlcmVkLmxvY2F0aW9ucyA9IGdsb2JhbERhdGEucmVjb3ZlcmVkLmxvY2F0aW9ucy5maWx0ZXIoY291bnRyeUZpbHRlcik7IC8vIGNvbnNvbGUubG9nKCJjb3VudHJ5IGRhdGEiLGNvdW50cnlEYXRhKTsKCiAgcmV0dXJuIGNvdW50cnlEYXRhOwp9CmV4cG9ydCBmdW5jdGlvbiBnZXRDb3VudHJ5SGlzdG9yeURhdGEoY291bnRyeURhdGEpIHsKICB2YXIgaGlzdG9yeUtleXMgPSBPYmplY3Qua2V5cyhjb3VudHJ5RGF0YS5jb25maXJtZWQubG9jYXRpb25zWzBdLmhpc3RvcnkpOwogIHZhciBoaXN0b3J5RGF0YSA9IFtdOyAvL2NyZWF0ZSBlbXB0eSBoaXN0b3J5IGRhdGEKCiAgZm9yICh2YXIgX2kzID0gMCwgX2hpc3RvcnlLZXlzID0gaGlzdG9yeUtleXM7IF9pMyA8IF9oaXN0b3J5S2V5cy5sZW5ndGg7IF9pMysrKSB7CiAgICB2YXIgZGF0ZUtleSA9IF9oaXN0b3J5S2V5c1tfaTNdOwogICAgdmFyIGVudHJ5ID0gewogICAgICBjb25maXJtZWQ6IDAsCiAgICAgIGN1cmVkOiAwLAogICAgICBkZWF0aDogMCwKICAgICAgZGF0ZTogZGF0ZUtleQogICAgfTsKICAgIGhpc3RvcnlEYXRhLnB1c2goZW50cnkpOwogIH0KCiAgZm9yICh2YXIgaWR4IGluIGNvdW50cnlEYXRhLmNvbmZpcm1lZC5sb2NhdGlvbnMpIHsKICAgIHZhciBfaXRlcmF0b3I4ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoaGlzdG9yeUtleXMpLAogICAgICAgIF9zdGVwODsKCiAgICB0cnkgewogICAgICB2YXIgX2xvb3AzID0gZnVuY3Rpb24gX2xvb3AzKCkgewogICAgICAgIHZhciBkYXRlS2V5ID0gX3N0ZXA4LnZhbHVlOwogICAgICAgIHZhciBjb25maXJtZWQgPSBjb3VudHJ5RGF0YS5jb25maXJtZWQubG9jYXRpb25zW2lkeF0uaGlzdG9yeVtkYXRlS2V5XTsKICAgICAgICB2YXIgZGVhdGhzID0gY291bnRyeURhdGEuZGVhdGhzLmxvY2F0aW9uc1tpZHhdLmhpc3RvcnlbZGF0ZUtleV07CiAgICAgICAgdmFyIHJlY292ZXJlZCA9IGNvdW50cnlEYXRhLnJlY292ZXJlZC5sb2NhdGlvbnNbaWR4XSA/IGNvdW50cnlEYXRhLnJlY292ZXJlZC5sb2NhdGlvbnNbaWR4XS5oaXN0b3J5W2RhdGVLZXldIDogMDsKICAgICAgICB2YXIgZGF0ZUVudHJ5ID0gaGlzdG9yeURhdGEuZmluZChmdW5jdGlvbiAoZSkgewogICAgICAgICAgcmV0dXJuIGUuZGF0ZSA9PT0gZGF0ZUtleTsKICAgICAgICB9KTsKICAgICAgICBkYXRlRW50cnkuY29uZmlybWVkICs9IGNvbmZpcm1lZDsKICAgICAgICBkYXRlRW50cnkuZGVhdGggKz0gZGVhdGhzOwogICAgICAgIGRhdGVFbnRyeS5jdXJlZCArPSByZWNvdmVyZWQgPyByZWNvdmVyZWQgOiAwOwogICAgICB9OwoKICAgICAgZm9yIChfaXRlcmF0b3I4LnMoKTsgIShfc3RlcDggPSBfaXRlcmF0b3I4Lm4oKSkuZG9uZTspIHsKICAgICAgICBfbG9vcDMoKTsKICAgICAgfQogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgIF9pdGVyYXRvcjguZShlcnIpOwogICAgfSBmaW5hbGx5IHsKICAgICAgX2l0ZXJhdG9yOC5mKCk7CiAgICB9CiAgfQoKICB3aGlsZSAoaGlzdG9yeURhdGFbMF0gJiYgaGlzdG9yeURhdGFbMF0uY29uZmlybWVkID09PSAwKSB7CiAgICBoaXN0b3J5RGF0YS5zaGlmdCgpOwogIH0gLy8gY29uc29sZS5sb2coImNvdW50cnkgaGlzdG9yeSBkYXRhIiwgaGlzdG9yeURhdGEpOwoKCiAgcmV0dXJuIGhpc3RvcnlEYXRhOwp9CmV4cG9ydCBmdW5jdGlvbiBnZXRDb3VudHJ5Q29tcGFyZURhdGEoZ2xvYmFsRGF0YSwgY291bnRyeU5hbWUsIG1pbkNhc2VzKSB7CiAgdmFyIGhpc3RvcnlEYXRhID0gZ2V0Q291bnRyeUhpc3RvcnlEYXRhKGdldENvdW50cnlEYXRhKGdsb2JhbERhdGEsIGNvdW50cnlOYW1lKSk7CgogIHdoaWxlIChoaXN0b3J5RGF0YVswXSAmJiBoaXN0b3J5RGF0YVswXS5jb25maXJtZWQgPD0gbWluQ2FzZXMpIHsKICAgIGhpc3RvcnlEYXRhLnNoaWZ0KCk7CiAgfQoKICByZXR1cm4gaGlzdG9yeURhdGE7Cn0KLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovCi8vIGJ5IGRhdmllcyB4dWUKCmV4cG9ydCBmdW5jdGlvbiBjb21iaW5lVUtIaWdoQ2hhcnRzKGN1cnJlbnRVa0FyZWFEYXRhKSB7CiAgdmFyIGNvbW1vbkxvY2F0aW9uc0RhdGEgPSBbXTsKICB2YXIgbmFtZXMgPSBbXTsKICB2YXIga2V5cyA9IFtdOwoKICB2YXIgX2l0ZXJhdG9yOSA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHVrbWFwRGF0YS5mZWF0dXJlcyksCiAgICAgIF9zdGVwOTsKCiAgdHJ5IHsKICAgIGZvciAoX2l0ZXJhdG9yOS5zKCk7ICEoX3N0ZXA5ID0gX2l0ZXJhdG9yOS5uKCkpLmRvbmU7KSB7CiAgICAgIHZhciByZWdpb24gPSBfc3RlcDkudmFsdWU7CiAgICAgIG5hbWVzLnB1c2gocmVnaW9uLnByb3BlcnRpZXMubmFtZSk7CiAgICAgIGtleXMucHVzaChyZWdpb24ucHJvcGVydGllc1siaGMta2V5Il0pOwogICAgfSAvLyBjb25zb2xlLmxvZyhrZXlzKTsKCiAgfSBjYXRjaCAoZXJyKSB7CiAgICBfaXRlcmF0b3I5LmUoZXJyKTsKICB9IGZpbmFsbHkgewogICAgX2l0ZXJhdG9yOS5mKCk7CiAgfQoKICB2YXIgX2l0ZXJhdG9yMTAgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihjdXJyZW50VWtBcmVhRGF0YSksCiAgICAgIF9zdGVwMTA7CgogIHRyeSB7CiAgICBmb3IgKF9pdGVyYXRvcjEwLnMoKTsgIShfc3RlcDEwID0gX2l0ZXJhdG9yMTAubigpKS5kb25lOykgewogICAgICB2YXIgamVmZkFyZWEgPSBfc3RlcDEwLnZhbHVlOwoKICAgICAgaWYgKG5hbWVzLmluY2x1ZGVzKGplZmZBcmVhLmxvY2F0aW9uKSkgewogICAgICAgIHZhciBpbmRleCA9IG5hbWVzLmluZGV4T2YoamVmZkFyZWEubG9jYXRpb24pOwogICAgICAgIGlmIChpbmRleCA+IC0xKSAvL25hbWVzLnNwbGljZShpMSwgMSk7CiAgICAgICAgICBjb21tb25Mb2NhdGlvbnNEYXRhLnB1c2goW2tleXNbaW5kZXhdLCBqZWZmQXJlYS5udW1iZXJdKTsKICAgICAgfQogICAgfSAvLyBjb25zb2xlLmxvZyh0aGlzLmNvbW1vbkxvY2F0aW9uc0RhdGEpOwoKICB9IGNhdGNoIChlcnIpIHsKICAgIF9pdGVyYXRvcjEwLmUoZXJyKTsKICB9IGZpbmFsbHkgewogICAgX2l0ZXJhdG9yMTAuZigpOwogIH0KCiAgcmV0dXJuIGNvbW1vbkxvY2F0aW9uc0RhdGE7Cn0KZXhwb3J0IGZ1bmN0aW9uIGNvbWJpbmVVU0hpZ2hDaGFydHMoY3VycmVudFVTQXJlYURhdGEsIGRhdGFUeXBlS2V5KSB7CiAgdmFyIGNvbW1vbkxvY2F0aW9uc0RhdGEgPSBbXTsKICB2YXIgZmlwcyA9IFtdOwogIHZhciBrZXlzID0gW107CgogIHZhciBfaXRlcmF0b3IxMSA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHVzbWFwRGF0YS5mZWF0dXJlcyksCiAgICAgIF9zdGVwMTE7CgogIHRyeSB7CiAgICBmb3IgKF9pdGVyYXRvcjExLnMoKTsgIShfc3RlcDExID0gX2l0ZXJhdG9yMTEubigpKS5kb25lOykgewogICAgICB2YXIgcmVnaW9uID0gX3N0ZXAxMS52YWx1ZTsKICAgICAgZmlwcy5wdXNoKE51bWJlcihyZWdpb24ucHJvcGVydGllc1sic3RhdGUtZmlwcyJdKSk7CiAgICAgIGtleXMucHVzaChyZWdpb24ucHJvcGVydGllc1siaGMta2V5Il0pOwogICAgfQogIH0gY2F0Y2ggKGVycikgewogICAgX2l0ZXJhdG9yMTEuZShlcnIpOwogIH0gZmluYWxseSB7CiAgICBfaXRlcmF0b3IxMS5mKCk7CiAgfQoKICB2YXIgX2l0ZXJhdG9yMTIgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihjdXJyZW50VVNBcmVhRGF0YSksCiAgICAgIF9zdGVwMTI7CgogIHRyeSB7CiAgICBmb3IgKF9pdGVyYXRvcjEyLnMoKTsgIShfc3RlcDEyID0gX2l0ZXJhdG9yMTIubigpKS5kb25lOykgewogICAgICB2YXIgX3JlZ2lvbiA9IF9zdGVwMTIudmFsdWU7CiAgICAgIHZhciByZWdpb25GaXAgPSBOdW1iZXIoX3JlZ2lvbi5maXBzKTsKCiAgICAgIGlmIChmaXBzLmluY2x1ZGVzKHJlZ2lvbkZpcCkpIHsKICAgICAgICB2YXIgaW5kZXggPSBmaXBzLmluZGV4T2YocmVnaW9uRmlwKTsKICAgICAgICBpZiAoaW5kZXggPiAtMSkgY29tbW9uTG9jYXRpb25zRGF0YS5wdXNoKFtrZXlzW2luZGV4XSwgTnVtYmVyKF9yZWdpb25bZGF0YVR5cGVLZXldKV0pOwogICAgICB9CiAgICB9IC8vIGNvbnNvbGUubG9nKCJVUyBNQVAiLCBjb21tb25Mb2NhdGlvbnNEYXRhKTsKCiAgfSBjYXRjaCAoZXJyKSB7CiAgICBfaXRlcmF0b3IxMi5lKGVycik7CiAgfSBmaW5hbGx5IHsKICAgIF9pdGVyYXRvcjEyLmYoKTsKICB9CgogIHJldHVybiBjb21tb25Mb2NhdGlvbnNEYXRhOwp9CmV4cG9ydCBmdW5jdGlvbiBjb21iaW5lV29ybGRIaWdoQ2hhcnRzKGN1cnJlbnRXb3JsZEFyZWFEYXRhLCBkYXRhVHlwZUtleSkgewogIHZhciBjb2RlTWFwID0gbmV3IE1hcCgpOwogIHZhciBuYW1lTWFwID0gbmV3IE1hcCgpOwogIHZhciBhbGxNYXAgPSBuZXcgTWFwKCk7CgogIHZhciBfaXRlcmF0b3IxMyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHdvcmxkbWFwRGF0YS5mZWF0dXJlcyksCiAgICAgIF9zdGVwMTM7CgogIHRyeSB7CiAgICBmb3IgKF9pdGVyYXRvcjEzLnMoKTsgIShfc3RlcDEzID0gX2l0ZXJhdG9yMTMubigpKS5kb25lOykgewogICAgICB2YXIgcmVnaW9uID0gX3N0ZXAxMy52YWx1ZTsKICAgICAgbmFtZU1hcC5zZXQocmVnaW9uLnByb3BlcnRpZXMubmFtZSwgcmVnaW9uLnByb3BlcnRpZXNbImhjLWtleSJdKTsKICAgICAgY29kZU1hcC5zZXQocmVnaW9uLnByb3BlcnRpZXNbImhjLWEyIl0sIHJlZ2lvbi5wcm9wZXJ0aWVzWyJoYy1rZXkiXSk7CiAgICB9IC8vIGNvbnNvbGUubG9nKCJNQVAiLGNvZGVNYXAsIG5hbWVNYXApCgogIH0gY2F0Y2ggKGVycikgewogICAgX2l0ZXJhdG9yMTMuZShlcnIpOwogIH0gZmluYWxseSB7CiAgICBfaXRlcmF0b3IxMy5mKCk7CiAgfQoKICB2YXIgbG9jYXRpb25zRGF0YSA9IFtdOwogIHZhciBjb3VudHJ5X2tleSA9ICIiOwogIHZhciBpbmRpdmlkdWFsX3N1bSA9IDA7CgogIHZhciBfaXRlcmF0b3IxNCA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGN1cnJlbnRXb3JsZEFyZWFEYXRhKSwKICAgICAgX3N0ZXAxNDsKCiAgdHJ5IHsKICAgIGZvciAoX2l0ZXJhdG9yMTQucygpOyAhKF9zdGVwMTQgPSBfaXRlcmF0b3IxNC5uKCkpLmRvbmU7KSB7CiAgICAgIHZhciBhcmVhID0gX3N0ZXAxNC52YWx1ZTsKCiAgICAgIGlmIChuYW1lTWFwLmhhcyhhcmVhLmNvdW50cnkpIHx8IGNvZGVNYXAuaGFzKGFyZWEuY291bnRyeV9jb2RlKSkgewogICAgICAgIC8vIENvdW50cnkKICAgICAgICBpZiAoaW5kaXZpZHVhbF9zdW0gPiAwKSB7CiAgICAgICAgICBpZiAoYWxsTWFwLmhhcyhjb3VudHJ5X2tleSkpIGFsbE1hcC5zZXQoY291bnRyeV9rZXksIGFsbE1hcC5nZXQoY291bnRyeV9rZXkpICsgaW5kaXZpZHVhbF9zdW0pO2Vsc2UgYWxsTWFwLnNldChjb3VudHJ5X2tleSwgaW5kaXZpZHVhbF9zdW0pOwogICAgICAgICAgaW5kaXZpZHVhbF9zdW0gPSAwOwogICAgICAgIH0KCiAgICAgICAgdmFyIGN1cnJlbnRfa2V5ID0gY29kZU1hcC5nZXQoYXJlYS5jb3VudHJ5X2NvZGUpOwogICAgICAgIGlmIChhbGxNYXAuaGFzKGN1cnJlbnRfa2V5KSkgYWxsTWFwLnNldChjdXJyZW50X2tleSwgYXJlYVtkYXRhVHlwZUtleV0gKyBhbGxNYXAuZ2V0KGN1cnJlbnRfa2V5KSk7ZWxzZSBhbGxNYXAuc2V0KGN1cnJlbnRfa2V5LCBhcmVhW2RhdGFUeXBlS2V5XSk7CiAgICAgIH0KICAgIH0KICB9IGNhdGNoIChlcnIpIHsKICAgIF9pdGVyYXRvcjE0LmUoZXJyKTsKICB9IGZpbmFsbHkgewogICAgX2l0ZXJhdG9yMTQuZigpOwogIH0KCiAgdmFyIF9pdGVyYXRvcjE1ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoYWxsTWFwKSwKICAgICAgX3N0ZXAxNTsKCiAgdHJ5IHsKICAgIGZvciAoX2l0ZXJhdG9yMTUucygpOyAhKF9zdGVwMTUgPSBfaXRlcmF0b3IxNS5uKCkpLmRvbmU7KSB7CiAgICAgIHZhciBlbnRyeSA9IF9zdGVwMTUudmFsdWU7CiAgICAgIGxvY2F0aW9uc0RhdGEucHVzaChlbnRyeSk7CiAgICB9IC8vIGNvbnNvbGUubG9nKGFsbE1hcCwgbG9jYXRpb25zRGF0YSk7CgogIH0gY2F0Y2ggKGVycikgewogICAgX2l0ZXJhdG9yMTUuZShlcnIpOwogIH0gZmluYWxseSB7CiAgICBfaXRlcmF0b3IxNS5mKCk7CiAgfQoKICByZXR1cm4gbG9jYXRpb25zRGF0YTsKfQpleHBvcnQgZnVuY3Rpb24gZ2V0VVNSZWdpb25EYXRhKF94KSB7CiAgcmV0dXJuIF9nZXRVU1JlZ2lvbkRhdGEuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gX2dldFVTUmVnaW9uRGF0YSgpIHsKICBfZ2V0VVNSZWdpb25EYXRhID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHVzU3RhdGVzKSB7CiAgICB2YXIgY3N2LCBzdGF0ZXNKc29uLCBkYXRlSnNvbiwgX2l0ZXJhdG9yMTYsIF9zdGVwMTYsIGVudHJ5LCBkYXRlS2V5LCBsb2NhdGlvbiwgZGFpbHlMb2NhdGlvbkpzb24sIF9pNCwgX09iamVjdCRlbnRyaWVzMiwgX09iamVjdCRlbnRyaWVzMiRfaSwga2V5LCB2YWx1ZSwgZGF5RGF0YTsKCiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGNzdiA9IHJlcXVpcmUoJ2NzdnRvanNvbicpOwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgcmV0dXJuIGNzdigpLmZyb21TdHJpbmcodXNTdGF0ZXMpOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgc3RhdGVzSnNvbiA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIGRhdGVKc29uID0ge307CiAgICAgICAgICAgIF9pdGVyYXRvcjE2ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoc3RhdGVzSnNvbik7CgogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yMTYucygpOyAhKF9zdGVwMTYgPSBfaXRlcmF0b3IxNi5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgICAgICBlbnRyeSA9IF9zdGVwMTYudmFsdWU7CiAgICAgICAgICAgICAgICBkYXRlS2V5ID0gbW9tZW50KGVudHJ5LmRhdGUpLmZvcm1hdCh3aW5kb3cuZGF0ZUZvcm1hdCk7CiAgICAgICAgICAgICAgICBpZiAoIWRhdGVKc29uW2RhdGVLZXldKSBkYXRlSnNvbltkYXRlS2V5XSA9IFtdOwogICAgICAgICAgICAgICAgbG9jYXRpb24gPSB7CiAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBlbnRyeS5zdGF0ZSwKICAgICAgICAgICAgICAgICAgZmlwczogZW50cnkuZmlwcwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGxvY2F0aW9uLmNvbmZpcm1lZCA9IGVudHJ5LmNhc2VzOwogICAgICAgICAgICAgICAgbG9jYXRpb24uZGVhdGggPSBlbnRyeS5kZWF0aHM7CiAgICAgICAgICAgICAgICBsb2NhdGlvbi5jdXJlZCA9IDA7CiAgICAgICAgICAgICAgICBsb2NhdGlvbi5hY3RpdmUgPSBsb2NhdGlvbi5jb25maXJtZWQgLSBsb2NhdGlvbi5kZWF0aDsKICAgICAgICAgICAgICAgIGxvY2F0aW9uLmRSYXRlID0gbG9jYXRpb24uY29uZmlybWVkID4gMCA/IGxvY2F0aW9uLmRlYXRoIC8gbG9jYXRpb24uY29uZmlybWVkICogMTAwIDogMDsKICAgICAgICAgICAgICAgIGxvY2F0aW9uLmNSYXRlID0gMDsKICAgICAgICAgICAgICAgIGRhdGVKc29uW2RhdGVLZXldLnB1c2gobG9jYXRpb24pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgX2l0ZXJhdG9yMTYuZShlcnIpOwogICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgIF9pdGVyYXRvcjE2LmYoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZGFpbHlMb2NhdGlvbkpzb24gPSBbXTsKCiAgICAgICAgICAgIGZvciAoX2k0ID0gMCwgX09iamVjdCRlbnRyaWVzMiA9IE9iamVjdC5lbnRyaWVzKGRhdGVKc29uKTsgX2k0IDwgX09iamVjdCRlbnRyaWVzMi5sZW5ndGg7IF9pNCsrKSB7CiAgICAgICAgICAgICAgX09iamVjdCRlbnRyaWVzMiRfaSA9IF9zbGljZWRUb0FycmF5KF9PYmplY3QkZW50cmllczJbX2k0XSwgMiksIGtleSA9IF9PYmplY3QkZW50cmllczIkX2lbMF0sIHZhbHVlID0gX09iamVjdCRlbnRyaWVzMiRfaVsxXTsKICAgICAgICAgICAgICBkYXlEYXRhID0gewogICAgICAgICAgICAgICAgYXJyOiB2YWx1ZSwKICAgICAgICAgICAgICAgIGRhdGU6IGtleQogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgZGFpbHlMb2NhdGlvbkpzb24ucHVzaChkYXlEYXRhKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgY29uc29sZS5sb2coInVzIGRhaWx5IGxvY2F0aW9uIGpzb24iLCBkYWlseUxvY2F0aW9uSnNvbik7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIGRhaWx5TG9jYXRpb25Kc29uKTsKCiAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUpOwogIH0pKTsKICByZXR1cm4gX2dldFVTUmVnaW9uRGF0YS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpleHBvcnQgZnVuY3Rpb24gZ2V0U21hbGxlckRhdGUobWFpbkRhdGUsIGxhcmdlc3REYXRlKSB7CiAgdmFyIHllYXJEYXRlRm9ybWF0ID0gd2luZG93LmRhdGVGb3JtYXQgKyAnIFlZWVknOwogIHZhciBjdXJyZW50TW9tZW50ID0gbW9tZW50KG1haW5EYXRlICsgJyAyMDIwJywgeWVhckRhdGVGb3JtYXQpOwoKICBpZiAoY3VycmVudE1vbWVudC5pc0FmdGVyKG1vbWVudChsYXJnZXN0RGF0ZSArICcgMjAyMCcsIHllYXJEYXRlRm9ybWF0KSkpIHsKICAgIHJldHVybiBsYXJnZXN0RGF0ZTsKICB9IGVsc2UgewogICAgcmV0dXJuIG1haW5EYXRlOwogIH0KfQpleHBvcnQgZnVuY3Rpb24gaXNEYXRlVmFsaWQobWFpbkRhdGUsIHNtYWxsZXN0RGF0ZSwgbGFyZ2VzdERhdGUpIHsKICB2YXIgeWVhckRhdGVGb3JtYXQgPSB3aW5kb3cuZGF0ZUZvcm1hdCArICcgWVlZWSc7CiAgdmFyIGN1cnJlbnRNb21lbnQgPSBtb21lbnQobWFpbkRhdGUgKyAnIDIwMjAnLCB5ZWFyRGF0ZUZvcm1hdCk7CiAgcmV0dXJuIGN1cnJlbnRNb21lbnQuaXNCZXR3ZWVuKG1vbWVudChzbWFsbGVzdERhdGUgKyAnIDIwMjAnLCB5ZWFyRGF0ZUZvcm1hdCksIG1vbWVudChsYXJnZXN0RGF0ZSArICcgMjAyMCcsIHllYXJEYXRlRm9ybWF0KSwgbnVsbCwgJ1tdJyk7Cn0="},{"version":3,"sources":["C:/Users/allys/Documents/GIT/Painel/src/js/locationUtils.js"],"names":["worldmapData","ukmapData","usmapData","moment","require","parseLocationData","areaData","locationJSON","JSON","parse","replace","filterNumber","place","number","toString","includes","location","trim","parseInt","forEach","getD3Data","dailyLocationJson","dataTypeKey","locationData","lastDailyData","dailyData","dailyLocationData","dailySum","arr","obj","name","value","isNaN","day","date","lastValue","lastLocationData","find","push","concat","getRegionHistoryTableData","allHistory","todayArr","history","area","data","format","window","dateFormat","todayDate","length","today","combineAllCountryData","globalData","combineProvince","filteredLocations","addedCountryCodes","confirmed","locations","region","confirmedArr","Object","entries","query","ele","country","province","deathArr","deaths","curedArr","recovered","country_code","main","key","death","cured","console","log","getGlobalHistoryTableData","hideCountryName","dateMap","dayData","active","dRate","cRate","checkAllZero","allZeroChecker","total","num","entry","reduce","getAllCountries","map","e","Set","getCountryData","countryName","countryData","latest","countryFilter","filter","getCountryHistoryData","historyKeys","keys","historyData","dateKey","idx","dateEntry","shift","getCountryCompareData","minCases","combineUKHighCharts","currentUkAreaData","commonLocationsData","names","features","properties","jeffArea","index","indexOf","combineUSHighCharts","currentUSAreaData","fips","Number","regionFip","combineWorldHighCharts","currentWorldAreaData","codeMap","Map","nameMap","allMap","set","locationsData","country_key","individual_sum","has","get","current_key","getUSRegionData","usStates","csv","fromString","statesJson","dateJson","state","cases","getSmallerDate","mainDate","largestDate","yearDateFormat","currentMoment","isAfter","isDateValid","smallestDate","isBetween"],"mappings":"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","sourcesContent":["// filter for d3 data,\r\n// written by @henryz00 on Apr 2020\r\n\r\nimport { worldmapData } from \"./worldmap\";\r\nimport { ukmapData } from \"./ukmap\";\r\nimport { usmapData } from \"./usmap\";\r\n\r\nconst moment = require('moment');\r\n\r\nexport function parseLocationData(areaData) {\r\n    if (!areaData) return null;\r\n    let locationJSON = JSON.parse(areaData.replace(/\\\\/g, \"\"));\r\n\r\n    let filterNumber = place => {\r\n        if (place.number != null) {\r\n            if (place.number.toString().includes(','))\r\n                place.number = place.number.replace(/,/g, '');\r\n            place.location = place.location.trim();\r\n            place.number = parseInt(place.number.toString().trim());\r\n        }\r\n    };\r\n    locationJSON.forEach(filterNumber);\r\n    return locationJSON;\r\n}\r\n\r\nexport function getD3Data(dailyLocationJson, dataTypeKey) {\r\n    // dailyLocationJson: { arr: [{location: String, number：Int},...], date: String(window.dateFormat)}\r\n\r\n    let locationData = [];\r\n    let lastDailyData = null;\r\n    for (let dailyData of dailyLocationJson) {\r\n        let dailyLocationData = [];\r\n        let dailySum = 0;\r\n        for (let location of dailyData.arr) {\r\n            let obj = {};\r\n            obj.name = location.location;\r\n            obj.value = (!location[dataTypeKey] || isNaN(location[dataTypeKey])) ? 0 : location[dataTypeKey];\r\n            obj.day = dailyData.date;\r\n            obj.lastValue = 0;\r\n            dailySum += obj.value;\r\n            if (lastDailyData) {\r\n                let lastLocationData = lastDailyData.arr.find(obj => { return obj.location === location.location });\r\n                obj.lastValue = lastLocationData && lastLocationData[dataTypeKey] ? lastLocationData[dataTypeKey] : 0;\r\n            }\r\n            dailyLocationData.push(obj)\r\n        }\r\n        lastDailyData = dailyData;\r\n        if (dailySum > 0)\r\n            locationData = locationData.concat(dailyLocationData);\r\n    }\r\n    // console.log(locationData)\r\n    return locationData;\r\n}\r\n\r\nexport function getRegionHistoryTableData(allHistory, todayArr) {\r\n    let dailyLocationJson = [];\r\n    for (let history of allHistory) {\r\n        if (history.area) {\r\n            let data = {};\r\n            data.arr = parseLocationData(history.area);\r\n            data.date = moment(history.date).format(window.dateFormat);\r\n            dailyLocationJson.push(data);\r\n        }\r\n    }\r\n\r\n    // add current data\r\n    let todayDate = moment().format(window.dateFormat);\r\n    if (dailyLocationJson[dailyLocationJson.length - 1].date != todayDate) {\r\n        let today = { arr: todayArr, date: todayDate };\r\n        dailyLocationJson.push(today);\r\n    }\r\n\r\n    // console.log(\"uk daily location json\", dailyLocationJson);\r\n    return dailyLocationJson;\r\n}\r\n\r\nfunction combineAllCountryData(globalData, combineProvince) {\r\n    let filteredLocations = [];\r\n    let addedCountryCodes = {};\r\n    for (let region of globalData.confirmed.locations) {\r\n        let confirmedArr = Object.entries(region.history);\r\n        let query = (ele) => { return ele.country === region.country && ele.province === region.province };\r\n        let deathArr = globalData.deaths.locations.find(query)?.history;\r\n        let curedArr = globalData.recovered.locations.find(query)?.history;\r\n        if (combineProvince && addedCountryCodes[region.country_code]) {\r\n            let main = filteredLocations[filteredLocations.length - 1];\r\n            for (let [key, value] of confirmedArr) {\r\n                main.confirmed[key] = main.confirmed[key] + value;\r\n                main.death[key] = main.death[key] + deathArr[key];\r\n                main.cured[key] = main.cured[key] + (curedArr ? curedArr[key] : 0);\r\n            }\r\n        } else {\r\n            addedCountryCodes[region.country_code] = true;\r\n            let main = { country: region.country, country_code: region.country_code, confirmed: {}, death: {}, cured: {} };\r\n            if (!combineProvince)\r\n                main.province = region.province;\r\n            for (let [key, value] of confirmedArr) {\r\n                main.confirmed[key] = value;\r\n                main.death[key] = deathArr[key];\r\n                main.cured[key] = (curedArr ? curedArr[key] : 0);\r\n            }\r\n            filteredLocations.push(main)\r\n        }\r\n    }\r\n    console.log(\"combined results\", filteredLocations);\r\n    return filteredLocations;\r\n}\r\n\r\nexport function getGlobalHistoryTableData(globalData, hideCountryName, combineProvince) {\r\n    let locations = combineAllCountryData(globalData, combineProvince);\r\n    let dateMap = {};\r\n    for (let dayData of locations) {\r\n        let confirmedArr = Object.entries(dayData.confirmed);\r\n        for (let [key, value] of confirmedArr) {\r\n            let date = moment(key).format(window.dateFormat);\r\n            let name = hideCountryName && dayData[\"province\"] ? dayData[\"province\"] : (dayData[\"country\"] + (dayData[\"province\"] ? (\" - \" + dayData[\"province\"]) : \"\"));\r\n            let location = combineProvince ? { location: name, country_code: dayData[\"country_code\"], country: dayData[\"country\"] } : { location: name };\r\n            location.confirmed = value;\r\n            location.death = dayData.death[key];\r\n            location.cured = dayData.cured[key];\r\n            location.active = location.confirmed - location.cured - location.death;\r\n            location.dRate = location.confirmed > 0 ? ((location.death / location.confirmed) * 100) : 0;\r\n            location.cRate = location.confirmed > 0 ? ((location.cured / location.confirmed) * 100) : 0;\r\n            dateMap[date] = dateMap[date] ? dateMap[date] : [];\r\n            dateMap[date].push(location)\r\n        }\r\n    }\r\n    // console.log(dateMap);\r\n    let dailyLocationJson = [];\r\n    let checkAllZero = true;\r\n    let allZeroChecker = (total, num) => { return total + num.confirmed };\r\n    for (let entry of Object.entries(dateMap)) {\r\n        if (checkAllZero) {\r\n            if (entry[1].reduce(allZeroChecker, 0) === 0) {\r\n                continue;\r\n            } else {\r\n                checkAllZero = false;\r\n            }\r\n        }\r\n        dailyLocationJson.push({ arr: entry[1], date: entry[0] })\r\n    }\r\n    // console.log(\"global daily location json\", dailyLocationJson);\r\n    return dailyLocationJson;\r\n}\r\n\r\nexport function getAllCountries(locations) {\r\n    let arr = locations.map(e => e.country);\r\n    return new Set(arr);\r\n    //ref https://stackoverflow.com/questions/9229645/remove-duplicate-values-from-js-array\r\n}\r\n\r\nexport function getCountryData(globalData, countryName) {\r\n    // console.log(globalData);\r\n    let countryData = { confirmed: {}, deaths: {}, recovered: {}, latest: {} };\r\n    let countryFilter = countryName == \"world\" ? () => { return true } : e => (e.country == countryName);\r\n    countryData.confirmed.locations = globalData.confirmed.locations.filter(countryFilter);\r\n    countryData.deaths.locations = globalData.deaths.locations.filter(countryFilter);\r\n    countryData.recovered.locations = globalData.recovered.locations.filter(countryFilter);\r\n    // console.log(\"country data\",countryData);\r\n    return countryData;\r\n}\r\n\r\nexport function getCountryHistoryData(countryData) {\r\n\r\n    let historyKeys = Object.keys(countryData.confirmed.locations[0].history);\r\n    let historyData = [];\r\n    //create empty history data\r\n    for (let dateKey of historyKeys) {\r\n        let entry = {\r\n            confirmed: 0,\r\n            cured: 0,\r\n            death: 0,\r\n            date: dateKey\r\n        };\r\n        historyData.push(entry);\r\n    }\r\n\r\n    for (let idx in countryData.confirmed.locations) {\r\n        for (let dateKey of historyKeys) {\r\n            let confirmed = countryData.confirmed.locations[idx].history[dateKey];\r\n            let deaths = countryData.deaths.locations[idx].history[dateKey];\r\n            let recovered = countryData.recovered.locations[idx] ? countryData.recovered.locations[idx].history[dateKey] : 0;\r\n            let dateEntry = historyData.find(e => e.date === dateKey);\r\n            dateEntry.confirmed += confirmed;\r\n            dateEntry.death += deaths;\r\n            dateEntry.cured += recovered ? recovered : 0;\r\n        }\r\n    }\r\n\r\n    while (historyData[0] && historyData[0].confirmed === 0) {\r\n        historyData.shift();\r\n    }\r\n\r\n    // console.log(\"country history data\", historyData);\r\n    return historyData;\r\n}\r\n\r\nexport function getCountryCompareData(globalData, countryName, minCases) {\r\n    let historyData = getCountryHistoryData(getCountryData(globalData, countryName));\r\n    while (historyData[0] && historyData[0].confirmed <= minCases) {\r\n        historyData.shift();\r\n    }\r\n    return historyData;\r\n\r\n}\r\n\r\n/* --------------------------------------------------------------------------------------- */\r\n// by davies xue\r\n\r\nexport function combineUKHighCharts(currentUkAreaData) {\r\n    let commonLocationsData = [];\r\n    let names = [];\r\n    let keys = [];\r\n    for (let region of ukmapData.features) {\r\n        names.push(region.properties.name);\r\n        keys.push(region.properties[\"hc-key\"]);\r\n    }\r\n    // console.log(keys);\r\n\r\n    for (let jeffArea of currentUkAreaData) {\r\n        if (names.includes(jeffArea.location)) {\r\n            const index = names.indexOf(jeffArea.location);\r\n            if (index > -1)\r\n                //names.splice(i1, 1);\r\n                commonLocationsData.push([keys[index], jeffArea.number]);\r\n        }\r\n    }\r\n    // console.log(this.commonLocationsData);\r\n\r\n    return commonLocationsData;\r\n}\r\n\r\nexport function combineUSHighCharts(currentUSAreaData, dataTypeKey) {\r\n    let commonLocationsData = [];\r\n    let fips = [];\r\n    let keys = [];\r\n    for (let region of usmapData.features) {\r\n        fips.push(Number(region.properties[\"state-fips\"]));\r\n        keys.push(region.properties[\"hc-key\"]);\r\n    }\r\n\r\n    for (let region of currentUSAreaData) {\r\n        let regionFip = Number(region.fips);\r\n        if (fips.includes(regionFip)) {\r\n            const index = fips.indexOf(regionFip);\r\n            if (index > -1)\r\n                commonLocationsData.push([keys[index], Number(region[dataTypeKey])]);\r\n        }\r\n    }\r\n    // console.log(\"US MAP\", commonLocationsData);\r\n\r\n    return commonLocationsData;\r\n}\r\n\r\n\r\nexport function combineWorldHighCharts(currentWorldAreaData, dataTypeKey) {\r\n    let codeMap = new Map();\r\n    let nameMap = new Map();\r\n    let allMap = new Map();\r\n    for (let region of worldmapData.features) {\r\n        nameMap.set(region.properties.name, region.properties[\"hc-key\"]);\r\n        codeMap.set(region.properties[\"hc-a2\"], region.properties[\"hc-key\"]);\r\n    }\r\n    // console.log(\"MAP\",codeMap, nameMap)\r\n    let locationsData = [];\r\n    let country_key = \"\";\r\n    let individual_sum = 0;\r\n    for (let area of currentWorldAreaData) {\r\n        if (nameMap.has(area.country) || codeMap.has(area.country_code)) {\r\n            // Country\r\n            if (individual_sum > 0) {\r\n                if (allMap.has(country_key))\r\n                    allMap.set(country_key, allMap.get(country_key) + individual_sum);\r\n                else\r\n                    allMap.set(country_key, individual_sum);\r\n                individual_sum = 0;\r\n            }\r\n            let current_key = codeMap.get(area.country_code);\r\n            if (allMap.has(current_key))\r\n                allMap.set(current_key, area[dataTypeKey] + allMap.get(current_key));\r\n            else\r\n                allMap.set(current_key, area[dataTypeKey]);\r\n        }\r\n    }\r\n\r\n    for (let entry of allMap)\r\n        locationsData.push(entry);\r\n    // console.log(allMap, locationsData);\r\n    return locationsData;\r\n}\r\n\r\n\r\nexport async function getUSRegionData(usStates) {\r\n    const csv = require('csvtojson');\r\n    let statesJson = await csv().fromString(usStates);\r\n\r\n    let dateJson = {};\r\n    for (let entry of statesJson) {\r\n        let dateKey = moment(entry.date).format(window.dateFormat);\r\n        if (!dateJson[dateKey]) dateJson[dateKey] = [];\r\n        let location = { location: entry.state, fips: entry.fips };\r\n        location.confirmed = entry.cases;\r\n        location.death = entry.deaths;\r\n        location.cured = 0;\r\n        location.active = location.confirmed - location.death;\r\n        location.dRate = location.confirmed > 0 ? ((location.death / location.confirmed) * 100) : 0;\r\n        location.cRate = 0;\r\n        dateJson[dateKey].push(location)\r\n    }\r\n\r\n    let dailyLocationJson = [];\r\n    for (let [key, value] of Object.entries(dateJson)) {\r\n        let dayData = { arr: value, date: key };\r\n        dailyLocationJson.push(dayData)\r\n    }\r\n    console.log(\"us daily location json\", dailyLocationJson);\r\n    return dailyLocationJson;\r\n}\r\n\r\nexport function getSmallerDate(mainDate, largestDate) {\r\n    const yearDateFormat = window.dateFormat + ' YYYY';\r\n    let currentMoment = moment(mainDate+' 2020', yearDateFormat);\r\n    if(currentMoment.isAfter(moment(largestDate+' 2020', yearDateFormat))){\r\n        return largestDate;\r\n    }else{\r\n        return mainDate;\r\n    }\r\n}\r\n\r\nexport function isDateValid(mainDate, smallestDate, largestDate) {\r\n    const yearDateFormat = window.dateFormat + ' YYYY';\r\n    let currentMoment = moment(mainDate+' 2020', yearDateFormat);\r\n    return (currentMoment.isBetween(moment(smallestDate+' 2020', yearDateFormat),\r\n        moment(largestDate+' 2020', yearDateFormat), null, '[]'))\r\n}"]}]}