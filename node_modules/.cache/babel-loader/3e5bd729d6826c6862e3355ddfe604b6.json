{"remainingRequest":"C:\\Users\\allys\\Documents\\GIT\\Painel\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\allys\\Documents\\GIT\\Painel\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\allys\\Documents\\GIT\\Painel\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\allys\\Documents\\GIT\\Painel\\src\\components\\MiniAppPostOverlay.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\allys\\Documents\\GIT\\Painel\\src\\components\\MiniAppPostOverlay.vue","mtime":1590605624628},{"path":"C:\\Users\\allys\\Documents\\GIT\\Painel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\allys\\Documents\\GIT\\Painel\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\allys\\Documents\\GIT\\Painel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\allys\\Documents\\GIT\\Painel\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL2FsbHlzL0RvY3VtZW50cy9HSVQvUGFpbmVsL25vZGVfbW9kdWxlcy9AdnVlL2JhYmVsLXByZXNldC1hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgd3ggZnJvbSAnd2VpeGluLWpzLXNkayc7CmltcG9ydCBNb3JlSWNvbiBmcm9tICdtZGktdnVlL0NoZXZyb25Eb3duJzsKaW1wb3J0IExlc3NJY29uIGZyb20gJ21kaS12dWUvQ2hldnJvblVwJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJNaW5pQXBwUG9zdE92ZXJsYXkiLAogIGNvbXBvbmVudHM6IHsKICAgIE1vcmVJY29uOiBNb3JlSWNvbiwKICAgIExlc3NJY29uOiBMZXNzSWNvbgogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHBvc3RzOiBudWxsLAogICAgICBzaG93TW9yZTogdHJ1ZQogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHd4Lm1pbmlQcm9ncmFtLmdldEVudihmdW5jdGlvbiAocmVzKSB7CiAgICAgIGNvbnNvbGUubG9nKHJlcy5taW5pcHJvZ3JhbSk7CiAgICB9KTsKICAgIGZldGNoKCJodHRwczovL3VjbGNzc2EuY24vcG9zdC9nZXRQb3N0RW5kcG9pbnQucGhwP2F1dGg9dWNsJnNwYWNlPTEzIikudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUocmVzKSB7CiAgICAgICAgdmFyIGRhdGE7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgZGF0YSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBfdGhpcy5wb3N0cyA9IGRhdGEucG9zdHM7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSk7CgogICAgICByZXR1cm4gZnVuY3Rpb24gKF94KSB7CiAgICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfTsKICAgIH0oKSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBnb1RvQ29tbXVuaXR5OiBmdW5jdGlvbiBnb1RvQ29tbXVuaXR5KCkgewogICAgICB3eC5taW5pUHJvZ3JhbS5zd2l0Y2hUYWIoewogICAgICAgIHVybDogJy9wYWdlcy9kaXNjb3Zlci9kaXNjb3ZlcicKICAgICAgfSk7CiAgICAgIHdpbmRvdy5nYSgnc2VuZCcsICdldmVudCcsICJtaW5pLWFwcCIsICJnby10by1jb21tdW5pdHkiLCAiIik7CiAgICB9LAogICAgZ29Ub1B1Ymxpc2g6IGZ1bmN0aW9uIGdvVG9QdWJsaXNoKCkgewogICAgICB3eC5taW5pUHJvZ3JhbS5uYXZpZ2F0ZVRvKHsKICAgICAgICB1cmw6ICcvcGFnZXMvcHVibGlzaC9wdWJsaXNoP3NwYWNlX2lkPTEzJwogICAgICB9KTsKICAgICAgd2luZG93LmdhKCdzZW5kJywgJ2V2ZW50JywgIm1pbmktYXBwIiwgImdvLXRvLXB1Ymxpc2giLCAiIik7CiAgICB9LAogICAgZ29Ub1Bvc3Q6IGZ1bmN0aW9uIGdvVG9Qb3N0KGlkKSB7CiAgICAgIHd4Lm1pbmlQcm9ncmFtLm5hdmlnYXRlVG8oewogICAgICAgIHVybDogJy9wYWdlcy9tb21lbnRzL2RldGFpbD9pZD0nICsgaWQKICAgICAgfSk7CiAgICAgIHdpbmRvdy5nYSgnc2VuZCcsICdldmVudCcsICJtaW5pLWFwcCIsICJnby10by1wb3N0IiwgaWQpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["MiniAppPostOverlay.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAwBA,OAAA,EAAA,MAAA,eAAA;AACA,OAAA,QAAA,MAAA,qBAAA;AACA,OAAA,QAAA,MAAA,mBAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,oBADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,QAAA,EAAA,QADA;AAEA,IAAA,QAAA,EAAA;AAFA,GAFA;AAMA,EAAA,IAAA,EAAA,gBAAA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,IADA;AAEA,MAAA,QAAA,EAAA;AAFA,KAAA;AAIA,GAXA;AAYA,EAAA,OAZA,qBAYA;AAAA;;AACA,IAAA,EAAA,CAAA,WAAA,CAAA,MAAA,CAAA,UAAA,GAAA,EAAA;AAAA,MAAA,OAAA,CAAA,GAAA,CAAA,GAAA,CAAA,WAAA;AAAA,KAAA;AACA,IAAA,KAAA,CAAA,+DAAA,CAAA,CAAA,IAAA;AAAA,yEAAA,iBAAA,GAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACA,GAAA,CAAA,IAAA,EADA;;AAAA;AACA,gBAAA,IADA;AAEA,gBAAA,KAAA,CAAA,KAAA,GAAA,IAAA,CAAA,KAAA;;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAA;;AAAA;AAAA;AAAA;AAAA;AAIA,GAlBA;AAmBA,EAAA,OAAA,EAAA;AACA,IAAA,aADA,2BACA;AACA,MAAA,EAAA,CAAA,WAAA,CAAA,SAAA,CAAA;AACA,QAAA,GAAA,EAAA;AADA,OAAA;AAGA,MAAA,MAAA,CAAA,EAAA,CAAA,MAAA,EAAA,OAAA,EAAA,UAAA,EAAA,iBAAA,EAAA,EAAA;AACA,KANA;AAOA,IAAA,WAPA,yBAOA;AACA,MAAA,EAAA,CAAA,WAAA,CAAA,UAAA,CAAA;AACA,QAAA,GAAA,EAAA;AADA,OAAA;AAGA,MAAA,MAAA,CAAA,EAAA,CAAA,MAAA,EAAA,OAAA,EAAA,UAAA,EAAA,eAAA,EAAA,EAAA;AACA,KAZA;AAaA,IAAA,QAbA,oBAaA,EAbA,EAaA;AACA,MAAA,EAAA,CAAA,WAAA,CAAA,UAAA,CAAA;AACA,QAAA,GAAA,EAAA,8BAAA;AADA,OAAA;AAGA,MAAA,MAAA,CAAA,EAAA,CAAA,MAAA,EAAA,OAAA,EAAA,UAAA,EAAA,YAAA,EAAA,EAAA;AACA;AAlBA;AAnBA,CAAA","sourcesContent":["<!--This section is only used for our community app posts, you can ignore if not needed-->\r\n<template>\r\n    <div class=\"ma-overlay\" v-if=\"posts\">\r\n        <div class=\"title_bg\" :class=\"{'hidden-title': !showMore}\">\r\n            <div :style=\"{color: showMore?'black':'white'}\">❤️学联社区疫情互助讨论</div>\r\n            <div style=\"color: #007BFF\" @click=\"showMore = !showMore\"><MoreIcon v-if=\"showMore\"/><LessIcon v-else/>{{showMore?'隐藏':'打开'}}</div>\r\n        </div>\r\n        <div v-if=\"showMore\">\r\n            <div style=\"display: flex;overflow-y: scroll; margin:0;\">\r\n                <div class=\"post-block\" v-for=\"post of posts\" :key=\"post.id\" @click=\"goToPost(post.post_id)\">\r\n                    <div style=\"float: right; color: #007BFF\">查看详情</div>\r\n                    <div style=\"opacity:0.5\">{{post.user}}</div>\r\n                    <div style=\"max-height: 10vh; overflow: scroll;\">{{post.content}}</div>\r\n                </div>\r\n            </div>\r\n            <div style=\"display: flex; justify-content: space-around; padding: 10px; color:white;\">\r\n                <div @click=\"goToCommunity\">查看更多</div>\r\n                <div @click=\"goToPublish\">发布动态</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import wx from 'weixin-js-sdk'\r\n    import MoreIcon from 'mdi-vue/ChevronDown'\r\n    import LessIcon from 'mdi-vue/ChevronUp'\r\n    export default {\r\n        name: \"MiniAppPostOverlay\",\r\n        components:{\r\n            MoreIcon,\r\n            LessIcon\r\n        },\r\n        data: function(){\r\n            return {\r\n                posts: null,\r\n                showMore: true\r\n            }\r\n        },\r\n        mounted() {\r\n            wx.miniProgram.getEnv(function(res) { console.log(res.miniprogram) })\r\n            fetch(\"https://uclcssa.cn/post/getPostEndpoint.php?auth=ucl&space=13\").then(async res=>{\r\n                let data = await res.json();\r\n                this.posts = data.posts;\r\n            })\r\n        },\r\n        methods:{\r\n            goToCommunity(){\r\n                wx.miniProgram.switchTab({\r\n                    url:'/pages/discover/discover'\r\n                });\r\n                window.ga('send', 'event', \"mini-app\", \"go-to-community\", \"\");\r\n            },\r\n            goToPublish(){\r\n                wx.miniProgram.navigateTo({\r\n                    url:'/pages/publish/publish?space_id=13'\r\n                });\r\n                window.ga('send', 'event', \"mini-app\", \"go-to-publish\", \"\");\r\n            },\r\n            goToPost(id){\r\n                wx.miniProgram.navigateTo({\r\n                    url:'/pages/moments/detail?id='+id\r\n                });\r\n                window.ga('send', 'event', \"mini-app\", \"go-to-post\", id);\r\n            },\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .title_bg{\r\n        /*background: linear-gradient(rgba(0, 0, 0, 0) 0%, black 70%);*/\r\n        display:flex;\r\n        justify-content: space-between;\r\n        padding: 0 10px;\r\n        padding-top: 25px;\r\n        text-shadow: 0px 0px 2px white;\r\n    }\r\n\r\n    .hidden-title{\r\n        padding: 10px;\r\n        padding-top: 30px;\r\n    }\r\n\r\n    .ma-overlay{\r\n        background: linear-gradient(rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.5));\r\n        position: fixed;\r\n        left: 0;\r\n        bottom: 0;\r\n        width: 100%;\r\n        z-index: 100;\r\n\r\n    }\r\n\r\n    .post-block{\r\n        min-width: 230px;\r\n        height: 17vh;\r\n        background: white;\r\n        padding: 10px;\r\n        overflow: hidden;\r\n        margin: 10px;\r\n        box-shadow: 0px 5px 10px -2px rgba(0, 0, 0, 0.2);\r\n        border-radius: 10px;\r\n        font-size: 14px;\r\n        white-space: pre-wrap;\r\n        text-overflow: ellipsis;\r\n    }\r\n</style>"],"sourceRoot":"src/components"}]}